{{NoteTA/MediaWiki}}
{{hh}}
{{读者手册导航}}
{{see also|m:Help:Diff/zh{{!}}m:Help:差異}}

在维基百科中可以比较一篇文章的两个'''不同修订版本之间的差异'''。它可以在[[help:页面历史|页面历史]]中点击“当前”或“先前”后看到或者在[[help:最近更改|最近更改]]中使用。此外，在[[help:编辑冲突|编辑冲突]]时也会出现。

在页面的两侧会显示两个版本的内容。老版本在左侧以黄色显示，而新版本在右侧以绿色显示。被删除的内容会在老版本中以红色显示。每行上会显示出两个版本之间的差异。另外，框架上方的“第X行”可以帮助粗略地定位修订在全部代码中的位置。

在两个不同版本的上部会显示修订的时间，以及到该用户页以及用户对话页的链接。而且还有一个到用户贡献页的链接。对于管理员，在新版本一侧会显示一个[[help:如何把页面恢复到早期版本|回退]]链接，可以直接恢复到早期的版本。 

另外，也会在用户名的下面显示两个版本的[[help:编辑摘要|编辑摘要]]。

==范例 ==
以下例子展示了差异页顶部所显示的信息（部分链接被替换成相关帮助页面）。旧版本在左侧，新版本在右侧。
{{clear}}
<blockquote style="border:1px solid black; padding: 1em;">
{| border="0" border-spacing=4px class='diff diff-contentalign-left'
|- align="center"
| colspan="2" width=50%|<strong>[[Help:页面历史|在2003年8月3日 (日) 22:32所做的修订版本]] （[[Wikipedia:如何编辑页面|编辑]]）</strong><br/>
[[User:Tim_Starling|Tim Starling]] ([[User_talk:Tim_Starling|讨论]] | [[Help:用户贡献页面|贡献]])<br/>
<span class="comment">(最好要填写[[Help:编辑摘要|编辑摘要]])</span><br/>
← [[Help:页面历史|上一版本]]
| colspan="2" class="diff-ntitle" |<strong>[[Help:页面历史|在2003年8月3日 (日) 00:10所做的修订版本]] （[[Wikipedia:如何编辑页面|编辑]]）（[[Help:回退|撤销]]）（[[Special:感謝|感謝]]）</strong><br/>
[[User:Angela|Angela]] ([[User_talk:Angela|讨论]] | [[Help:用户贡献页面|贡献]])    '''['''[[Wikipedia:回退功能|回退]]''']'''<br/>
<abbr class="minor" title="這是一個小修改">-{zh:m; zh-hant:小; zh-hans:小}-</span>  <span class="comment">(更正)</span><br/>
[[Help:页面历史|下一版本]] →
|-
| colspan="2" | '''第8行：'''
| colspan="2" | '''第8行：'''
|- 
|align="right" | 
|style="background: #F2F2F2;font-size: smaller"|  管理員有一個<nowiki>[[WP:回退|回退]]</nowiki>按鈕，那按鈕的用途是讓管理員可以從一個頁面的新版本回退到舊版本。
|align="right" | 
|style="background: #F2F2F2;font-size: smaller"|  管理員有一個<nowiki>[[WP:回退|回退]]</nowiki>按鈕，那按鈕的用途是讓管理員可以從一個頁面的新版本回退到舊版本。
|- 
|align="right" | 
|align="right" | 
|align="right" | 
|align="right" | 
|- 
|align="right" | -
|class="diff-deletedline"| This is only shown when viewing the diff between the <span style="color: red;font-weight: bold">current </span>version and the one <span style="color: red;font-weight: bold">immediately preceding it</span>.
|align="right" | +
|class="diff-addedline"| This is only shown when viewing the diff between the <span style="color: red;font-weight: bold">recent </span>version <span style="color: red;font-weight: bold">of a page </span>and <span style="color: red;font-weight: bold">the last version by an author other than </span>the one <span style="color: red;font-weight: bold">of the most current version</span>. 
|-
|align="right" | 
|style="background: #F2F2F2;font-size: smaller"|This example shows the top of the diff page, with links the described above.
|align="right" | 
|style="background: #F2F2F2;font-size: smaller"|This example shows the top of the diff page, with links the described above.
|-
| colspan="2" | '''第25行：'''
| colspan="2" | '''第25行：'''
|- 
|align="right" | 
|style="background: #F2F2F2;font-size: smaller;" | <nowiki></table></nowiki>
|align="right" |
|style="background: #F2F2F2;font-size: smaller;" | <nowiki></table></nowiki>
|- 
|align="right" | 
|align="right" | 
|align="right" | +
|class="diff-addedline"| <nowiki>[[MediaWiki_User's_Guide|MediaWiki User's Guide]]</nowiki>
|- 
|align="right" | 
|align="right" | 
|align="right" | +
|class="diff-addedline"| 
|}
</blockquote>

==完整版本==

差異表格之下會顯示被比較版本中最近的完整版本，可以在[[Special:参数设置|参数设置]]中设置显示与否。

== 版本差异链接 ==
如果您需要生成某一版本差异比较的链接（比如用在讨论页或通告版上），最好是使用[[Special:Diff/''<code>oldid</code>''<nowiki>|Special:Diff/''<code>oldid</code>''<nowiki>]]</nowiki>（oldid为旧版本号）方式或是{{Tl|Diff}}，这样链接可以跨协议使用（<code>http://</code>及<code>https://</code>）并兼容移动设备。也可以通过[[Help:页面历史|页面历史]]查找到需要的版本差异，打开差异页面，复制浏览器中的[[URL|网址]]。您可以将网址（完整网址，包含<nowiki>http://</nowiki>）粘贴到希望显示链接的页面，前后使用单个方括号[...]。

=== 外部链接 ===
版本差异的网址是基于旧版本的<code>oldid</code>值。如果某一版本的oldid值为1234567，那么网址即为：
*<code><nowiki>http://zh.wikipedia.org/w/index.php?title=页面名&oldid=1234567</nowiki></code>

你可以将网址中<code>title=页面名&</code>部分省略，写成如下形式：
*<code><nowiki>http://zh.wikipedia.org/w/index.php?oldid=1234567</nowiki></code>

差异版本的网址可以使用如下形式：

*同当前版本的差异：<br/><code><nowiki>http://zh.wikipedia.org/w/index.php?diff=cur&oldid=1234567</nowiki></code>
*同前一版本的差异：<br/><code><nowiki>http://zh.wikipedia.org/w/index.php?diff=prev&oldid=1234567</nowiki></code>
*同版本1000000的差异（不需要是同一页面）：<br/><code><nowiki>http://zh.wikipedia.org/w/index.php?diff=1000000&oldid=1234567</nowiki></code>
*如果只希望显示差异，而不希望显示页面内容，在上方任意链接中加入<code>&diffonly=1</code>参数：<br/><code><nowiki>http://zh.wikipedia.org/w/index.php?diff=cur&oldid=1234567&diffonly=1</nowiki></code>

同前一版本进行版本差异比较还有如下简略写法：
*<code><nowiki>http://zh.wikipedia.org/wiki/?diff=1234567</nowiki></code>

=== 内部链接 ===
尽管外部链接方便复制粘贴，但是它们太长、效率低。版本差异可以使用维基内链形式，使用[[Special:Diff/''<code>diff</code>''<nowiki>|Special:Diff/''<code>diff</code>''<nowiki>]]（例如</nowiki>[[Special:Diff/1234567|Special:Diff/1234567]]）或者[[Special:Diff/''<code>oldid</code>''/''<code>diff</code>''<nowiki>|Special:Diff/''<code>oldid</code>''/''<code>diff</code>''<nowiki>]]（例如</nowiki>[[Special:Diff/1000000/1000017|Special:Diff/1000000/1000017]]），只需将<code>oldid</code>和<code>diff</code>参数修改为网址中看到的对应参数。<code>diff</code>参数所对应的版本号应当比<code>oldid</code>数字大。这一语法十分易用，还可以被用在[[WP:ES|编辑摘要]]中。

=== <nowiki>{{Diff}}</nowiki> ===
另一种在维基百科站内链接版本差异的方式是使用{{tl|diff}}模板，但是这样就不能在编辑摘要中使用了。基本语法如下：
:{{tlx|Diff|''page''|''diff''|''oldid''|''label''}}
*{{para|''page''}} – 页面标题名。
*{{para|''diff''}} – 页面版本号或者关键词。可能的关键词有：
**<kbd>cur</kbd> – 同某一页面当前（最新）版本比较。
**<kbd>prev</kbd> – 同某一页面的前一个版本比较。
**<kbd>next</kbd> – 同某一页面的下一个版本比较。
**''id'' – 这一版本号应当比<kbd>oldid</kbd>数字大。
*{{para|''oldid''}} – 生成版本差异的基础页面版本号。
*{{para|''label''}} – 外部链接上显示的文字。如果缺省则会显示带编号的链接。
*{{para|diffonly|yes}} – 仅显示版本差异，不显示页面内容。必须带参数名。
{{H-f Help}}

[[Category:帮助文档|CY]]