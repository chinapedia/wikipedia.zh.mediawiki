{{字詞轉換索引}}
{{Shortcut|H:CONV}}
{{NoteTA
|G1 = IT
|G2 = MediaWiki
}}
中文维基百科的'''字词转换'''機制是由[[MediaWiki|MediaWiki]]的LanguageConverter实现的，其中提供了丰富的手动-{zh:設定;zh-tw:設定;zh-cn:设置}-语法供用户选择。

== 用語 ==
中文維基百科的字詞轉換系統雖然使用多時，但一直缺少一套較完整的用語用於人們溝通和學習。因為中文圈在這方面的文章和著述甚少，所以用語大量來自英文。用語來源有 [http://www.w3.org/MarkUp/html-spec/html-spec_toc.html HTML2.0 規格書]（即是 [http://www.ietf.org/rfc/rfc1866.txt rfc1866] ）中的 [http://www.w3.org/MarkUp/html-spec/html-spec_2.html Terms] 一節、為 HTML5 而設的《[http://www.w3.org/TR/html-markup/ HTML: The Markup Language Reference]》中的 [http://www.w3.org/TR/html-markup/syntax.html HTML syntax] 一節、《[http://www.w3.org/TR/2008/REC-xml-20081126/ Extensible Markup Language (XML) 1.0 (Fifth Edition)]》、英文維基百科（[[:en:HTML_elements|:en:HTML_elements]]、[[:en:HTML|:en:HTML]]……）、[[MediaWiki|MediaWiki]]軟體的原始碼（[http://svn.wikimedia.org/doc/LanguageConverter_8php_source.html LanguageConverter]、[http://svn.wikimedia.org/doc/LanguageZh_8php_source.html LanguageZh]），用語譯法來源有 Google Help （不使用標示為「自動翻譯的文章」的文章）、微軟 MSDN library （只使用標示為「人為翻譯」的文章）、 Google 圖書搜尋、 Google  Google web 搜尋等等。

維基標記（[[:en:wikimarkup|wikimarkup]]），或稱維基文字（[[:en:wikitext|wikitext]]、维基文本）、維基代碼（[[:en:wikicode|wikicode]]），是一種標記語言，各種功能透過標記（markup）來使用。在 HTML 和 XML 用語中，界定出-{zh:文件;zh-tw:文件;zh-cn:文档}-中的元素的標記稱為標籤（tag），除此之外，標記還可以是字元參照、實體參照、註釋、 DOCTYPE 宣告等，亦即任何字元資料（亦即純文字）以外的原始碼皆為標記。wikitext 還沒有清晰的定義，規格化的工作還在進行中，哪些標記才是標籤還不清楚。此文暫時把轉換語法的標記稱為標籤。

手動轉換語法的轉換標籤的語法大致有以下幾種：<br/>
<code>
<nowiki>-{</nowiki>text<nowiki>}-</nowiki>
</code><br/>
<code>
<nowiki>-{</nowiki> '''flag''' | variant1 : text1 ; variant2 : text2 ; <nowiki>}-</nowiki>
</code><br/>
<code>
<nowiki>-{</nowiki> '''flag1''' ; '''flag2''' | from => variant : to ; <nowiki>}-</nowiki>
</code>

====界定符號====
界定，即delimit，或譯分界、分隔，大陸多譯作定界，指以[[界定符號|界定符號]]／界定字元（[[:en:delimiter|delimiter]]）指明出純文字或資料串流中分開的獨立區域之間的邊界。純粹的 delimiter 起語法作用，語義極弱，相當於自然人類語文的標點符號。標記語言因使用了各種明確的界定符號，便於人腦和電腦靜態分析而見長。「<nowiki>-{</nowiki>」、「<nowiki>}-</nowiki>」為界定出轉換標籤的界定符號。轉換標籤內的垂線「|」為分隔出旗標列表和對應（map）規則的界定符號。旗標列表內的「;」為分隔各個旗標的界定符號。

====旗標====
旗標，即 [[:wiktionary:en:flag|flag]] ，為一種語法構造，用於要求轉換標籤的可選行為或甚至改變轉換標籤的整個動作。分為一般旗標和語種旗標。當沒有在旗標列表中使用任何旗標，則為空旗標。現時轉換標籤所支援的一般旗標有 A 、 H 、 T 、 D 、 R 、 N 、 - ，和只用於轉換-{程序}-內部而無法以語法直接指定的 S 和 + 旗標。

====沒有使用旗標列表====
為沒有使用垂線分隔出旗標列表時的情況，依據是否能從轉換標籤的內容中剖析（[[:en:parsing|parse]]）出對應規則（mapping rule）分為兩種處理方式。如果剖析出對應規則的話，則為 S 旗標轉換，即是尋常的顯示字詞轉換方式（S stands for show）。如果剖析不出任何對應規則的話，則為 R 旗標轉換，即是停用字詞轉換，顯示原文（R stands for raw）。

====空旗標====
或稱空旗標列表，為當旗標列表留空，沒有使用任何一個標旗時的說法。處理方式跟沒有使用旗標列表一樣，只不過這時依據的是垂線右則的內容。如果垂線右則的內容剖析不出任何對應規則的話，則為 R 旗標轉換，即是停用字詞轉換，顯示原文（R stands for raw）。

====原文====
這裡指不使用轉換器的情況下會顯示出的版本。在維基百科編輯文章時在編輯器顯示的即為原始碼版本的原文。 MediaWiki 的、中文維基百科所使用的字詞轉換系統的做法是，由原文轉換為某個指定的字詞模式，而不是由某一種語言轉成另一種語言。直至現時為止， MediaWiki 的字詞轉換系統不支援指定原文的某一部份所使用的為某一種語種或語言。

====語種====
原文 variant ，為變種、變體之意，在不同領域有不同譯法，在這裡暫譯為語種，[[政治正確|政治正確]]的叫法為用字模式。在轉換標籤的語法以語言代碼填寫。

====語言代碼====
原文[[:en:Language_code|language code]]，簡稱code，現時轉換標籤的語法所支援的[[語言代碼|語言代碼]]有zh、zh-hant、zh-hans、zh-tw、zh-cn、zh-hk、zh-sg、zh-mo、zh-my，原zh-my以zh-sg代替涵蓋，於2018年拆分。意思如下表：
{|class = "wikitable"
|-
!代碼!!語言!!備註
|-
|zh||中文||「zh」為「中」字的普通話拼音的聲母。
|-
|zh-hans||簡體||[[ISO_15924|ISO 15924]]代码。「han」為「漢」字的普通話拼音的英文譯法，s為「{{lang|en|Simplified Chinese}}」的首字母。
|-
|zh-hant||繁體||ISO 15924代码。「han」為「漢」字的普通話拼音的英文譯法，t為「{{lang|en|Traditional Chinese}}」的首字母。
|-
|zh-cn||大陸簡體||cn為中國（{{lang|en|China}}，特指中國大陸）的[[ISO_3166|ISO 3166]]-2[[國家地區代碼|國家地區代碼]]。
|-
|zh-hk||香港繁體||hk為香港（{{lang|en|Hong Kong}}）的國家地區代碼。
|-
|zh-mo||澳門繁體||mo為澳門（{{lang|en|Macau}}）的國家地區代碼。
|-
|zh-my||大馬簡體||my為馬來西亞（{{lang|en|Malaysia}}）的國家地區代碼。
|-
|zh-sg||新加坡簡體||sg為新加坡（{{lang|en|Singapore}}）的國家地區代碼。馬來西亞跟新加坡原用「馬新簡體」模式涵蓋。
|-
|zh-tw||台灣正體||tw為台灣（{{lang|en|Taiwan}}）的國家地區代碼。
|}

====主語言代碼====
原文 main language code ，簡稱 main code ，MediaWiki 的每個字詞轉換器都有個主要語言代碼，做為回傳語種時最後的預設值，如果某個語種沒有設定後援語言，則也使用主要語言代碼做為它的後援語言。每個語種的維基百科所使用的語言代碼即為它的主要語言代碼，中文維基百科的為 zh 。另一方面，MediaWiki 的某些語言版本，例如中文維基百科所使用的中文版，以主要語言代碼作為原文模式的語言代碼。

====手動等級====
====后退====
/* 後退 */

====後援語言====
当字词转换发现没有某语种的全文转换定义时，会查阅後援语种（{{lang-en|fallback language variant}}）的规则进行替补。

按[https://doc.wikimedia.org/mediawiki-core/master/php/ZhConverter_8php_source.html ZhConverter.php]的<code>getVariantsFallbacks</code>方法定义，各個语种的後援语种順序如下：

{| class="wikitable"
! 语种 !! colspan="3" | 後援语种
|-
| zh-hans || zh-cn || zh-sg || zh-my
|-
| zh-hant || zh-tw || zh-hk || zh-mo
|-
| zh-cn || zh-hans || zh-sg || zh-my
|-
| zh-hk || zh-hant || zh-mo || zh-tw
|-
| zh-mo || zh-hant || zh-hk || zh-tw
|-
| zh-my || zh-hans || zh-sg || zh-cn
|-
| zh-sg || zh-hans || zh-cn || zh-my
|-
| zh-tw || zh-hant || zh-hk || zh-mo
|}

zh的後援语种則依序爲zh-hans、zh-hant、zh-cn、zh-tw、zh-hk、zh-sg、zh-mo、zh-my。

====全文轉換====

====全語種全文轉換====

====語種旗標====

====Action====
指轉換規則的動作。

====Display====

====預設轉換表格====

== 语法 ==
=== 基本语法 ===
{|class = "wikitable" width = 90%
|-
! rowspan = 2 | 称谓
! rowspan = 2 width = 20% | 功能
! colspan = 2 | 示例
! rowspan = 2 width = 15% | 备注
|-
! width = 30% | 源码
! 输出结果
|-
! 双向转换
| 实现双向转换，可带有[[#转换标签|转换标签]]，为手动转换语法中最常用的功能
| <code>-{zh-hans:计算机; zh-hant:電腦;}-</code>
| {{hideH|双向转换输出结果}}
{| width = 100%
! 不转换
| -{计算机}-
|-
! 简体
| -{计算机}-
|-
! 繁體
| -{電腦}-
|-
! 大陆简体
| -{计算机}-
|-
! 港澳繁體
| -{電腦}-
|-
! 马新简体
| -{计算机}-
|-
! 台灣繁體
| -{電腦}-
|}
{{hideF}}
|
|-
! 单向转换
| 实现单向转换，可带有[[#转换标签|转换标签]]，主要用于新增全文转换规则，比双向转换效率高
|
<code>-{H|巨集=>zh-cn:宏;}-

测试：巨集、宏</code>
| {{hideH|单向转换输出结果}}
{| width = 100%
! 不转换
| -{测试：巨集、宏}-
|-
! 简体
| -{测试：巨集、宏}-
|-
! 繁體
| -{測試：巨集、宏}-
|-
! 大陆简体
| -{测试：宏、宏}-
|-
! 港澳繁體
| -{測試：巨集、宏}-
|-
! 马新简体
| -{测试：巨集、宏}-
|-
! 台灣繁體
| -{測試：巨集、宏}-
|}
{{hideF}}
| 单向转换不带继承特性，如左例中“简体”和“马新简体”并未转换用词。使用zh-hans亦只会应用到“简体”而不会应用“大陆简体”。
|-
! 禁止字词转换
| 同时禁止繁简和地区词的转换
|
<code>-{简体字繁體字}-</code>
| {{hideH|禁止字词转换输出结果}}
{| width = 100%
! 不转换
| -{简体字繁體字}-
|-
! 简体
| -{简体字繁體字}-
|-
! 繁體
| -{简体字繁體字}-
|-
! 大陆简体
| -{简体字繁體字}-
|-
! 港澳繁體
| -{简体字繁體字}-
|-
! 马新简体
| -{简体字繁體字}-
|-
! 台灣繁體
| -{简体字繁體字}-
|}
{{hideF}}
| 这种写法将完全禁止字词转换，在某些场合（如只需禁止地区词转换）或不适用
|-
! 禁止地区词转换
| 禁止被切断的地区词转换，但允许個別字之繁简转换
|
<code>北-{}-韓、北朝-{}-鲜</code><br />{{small|（假定系统转换表中有“-{北韓}-”和“-{北朝鲜}-”的对应规则）}}
| {{hideH|禁止地区词转换输出结果}}
{| width = 100%
! 不转换
| -{北韓、北朝鲜}-
|-
! 简体
| -{北韩、北朝鲜}-
|-
! 繁體
| -{北韓、北朝鮮}-
|-
! 大陆简体
| -{北韩、北朝鲜}-
|-
! 港澳繁體
| -{北韓、北朝鮮}-
|-
! 马新简体
| -{北韩、北朝鲜}-
|-
! 台灣繁體
| -{北韓、北朝鮮}-
|}
{{hideF}}
| 还有另一种组合转换标签的方式也可以实现同样的功能，并且便于在[[Help:模板|模板]]中使用，详见后文
|}

=== 转换标签 ===

==== 常用标签 ====
{|class = "wikitable" width = 90%
|-
! rowspan = 2 width = 3% | 标签
! rowspan = 2 width = 15% | 功能
! colspan = 2 | 示例
! rowspan = 2 width = 15% | 备注
|-
! width = 35% | 源码
! 输出结果
|-
! H
| 添加全文转换规则，并隐藏H转换文本
|
<code>-{H|zh-cn:博客; zh-hk:網誌; zh-tw:部落格;}-

测试：博客、網誌、部落格</code>
|{{hideH|H转换输出结果}}
{| width = 100%
! 不转换
| -{测试：博客、網誌、部落格}-
|-
! 简体
| -{测试：博客、网志、部落格}-
|-
! 繁體
| -{測試：博客、網誌、部落格}-
|-
! 大陆简体
| -{测试：博客、博客、博客}-
|-
! 港澳繁體
| -{測試：網誌、網誌、網誌}-
|-
! 马新简体
| -{测试：博客、博客、博客}-
|-
! 台灣繁體
| -{測試：部落格、部落格、部落格}-
|}
{{hideF}}
| “简体”和“繁體”下并不会转换用词模式，而只会转换纯粹的简繁体
|-
! A
| 添加全文转换规则，并输出A转换解析文本
|
<code>-{A|zh-cn:博客; zh-hk:網誌; zh-tw:部落格;}-

测试：博客、網誌、部落格</code>
|
{{hideH|A转换输出结果}}
{| width = 100%
! 不转换
| 
-{博客

测试：博客、網誌、部落格}-
|-
! 简体
| 
-{博客

测试：博客、网志、部落格}-
|-
! 繁體
| 
-{部落格

測試：博客、網誌、部落格}-
|-
! 大陆简体
| 
-{博客

测试：博客、博客、博客}-
|-
! 港澳繁體
| 
-{網誌

測試：網誌、網誌、網誌}-
|-
! 马新简体
| 
-{博客

测试：博客、博客、博客}-
|-
! 台灣繁體
| 
-{部落格

測試：部落格、部落格、部落格}-
|}
{{hideF}}
| 注意和H转换对比结果
|-
! -
| 移除全文转换规则
|
<code>-{H|zh-cn:博客; zh-hk:網誌; zh-tw:部落格;}-

测试1：博客、網誌、部落格

-{-|zh-cn:博客; zh-hk:網誌; zh-tw:部落格;}-

测试2：博客、網誌、部落格</code>
|{{hideH|H转换、-转换配合的输出结果}}
{| width = 100%
! 不转换
| -{测试1：博客、網誌、部落格

测试2：博客、網誌、部落格}-
|-
! 简体
| -{测试1：博客、网志、部落格

测试2：博客、网志、部落格}-
|-
! 繁體
| -{測試1：博客、網誌、部落格

測試2：博客、網誌、部落格}-
|-
! 大陆简体
| -{测试1：博客、博客、博客

测试2：博客、网志、部落格}-
|-
! 港澳繁體
| -{測試1：網誌、網誌、網誌

測試2：博客、網誌、部落格}-
|-
! 马新简体
| -{测试1：博客、博客、博客

测试2：博客、网志、部落格}-
|-
! 台灣繁體
| -{測試1：部落格、部落格、部落格

測試2：博客、網誌、部落格}-
|}
{{hideF}}
| 测试1和测试2有差異
|-
! T
| 强制覆盖页面原有标题
|
<code>-{T|zh-cn:汤姆·汉克斯; zh-hk:湯·漢斯; zh-tw:湯姆·漢克斯;}-</code>

{{small|（假定页面原始标题为“汤-{}-姆·汉-{}-克斯”）}}
|{{hideH|T转换输出结果（显示在页面标题处）}}
{| width = 100%
! 不转换
| -{汤姆·汉克斯}-
|-
! 简体
| -{汤姆·汉克斯}-
|-
! 繁體
| -{湯姆·漢克斯}-
|-
! 大陆简体
| -{汤姆·汉克斯}-
|-
! 港澳繁體
| -{湯·漢斯}-
|-
! 马新简体
| -{汤姆·汉克斯}-
|-
! 台灣繁體
| -{湯姆·漢克斯}-
|}
{{hideF}}
| 
|-
! D
| 描述转换规则
|
<code>-{D|zh-cn:汤姆·汉克斯; zh-hk:湯·漢斯; zh-tw:湯姆·漢克斯;}-</code>
|{{hideH|D转换输出结果}}
{| width = 100%
! 不转换
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 简体
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 繁體
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 大陆简体
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 港澳繁體
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 马新简体
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|-
! 台灣繁體
| -{大陆：汤姆·汉克斯；香港：湯·漢斯；台灣：湯姆·漢克斯；}-
|}
{{hideF}}
| 
|}

==== 组合转换标签 ====
{|class = "wikitable" width = 90%
|-
! rowspan = 2 width = 7% | 标签
! rowspan = 2 width = 13% | 功能
! colspan = 2 | 示例
! rowspan = 2 width = 12% | 备注
|-
! width = 37% | 源码
! 输出结果
|-
! style="white-space:nowrap;" | zh<br />zh-hans<br />zh-hant<br />zh-cn<br />zh-hk<br />zh-sg<br />zh-tw
| 限制要顯示的語言的有效範圍{{r|fallback}}。
|
<code>-{H|zh-cn:博客; zh-hk:網誌; zh-tw:部落格;}-

测试1：-{zh;zh-hans;zh-hant|博客、網誌、部落格}-

测试2：-{zh;zh-cn;zh-hk|博客、網誌、部落格}-</code>
|{{hideH|组合转换输出结果}}
{| width = 100%
! 不转换
| -{测试1：博客、網誌、部落格

测试2：博客、網誌、部落格}-
|-
! 简体
| -{测试1：博客、网志、部落格

测试2：博客、博客、博客}-
|-
! 繁體
| -{測試1：博客、網誌、部落格

測試2：網誌、網誌、網誌}-
|-
! 大陆简体
| -{测试1：博客、网志、部落格

测试2：博客、博客、博客}-
|-
! 港澳繁體
| -{測試1：博客、網誌、部落格

測試2：網誌、網誌、網誌}-
|-
! 马新简体
| -{测试1：博客、网志、部落格

测试2：博客、博客、博客}-
|-
! 台灣繁體
| -{測試1：博客、網誌、部落格

測試2：網誌、網誌、網誌}-
|}
{{hideF}}
| 除了测试1和测试2之間有差異外，跟上方使用 H 標籤作转换的例子之間也有差異{{r|fallback}}

测试1若為zh;zh-hans;zh-hant則顯示轉換後的<code>文字</code>，否則單純顯示不轉換的<code>文字</code>。有沿溯<small>（fallback）</small>的限制，MediaWiki 1.15新增功能。此功能可用于需要避免地区词转换，但允许繁简转换的场合。比如{{tl|Infobox Film}}中的各地片名部分。
|}

== 不转换的内容 ==
自动转换程序会自动规避“-{zh-hant:程式;zh-hans:程序}-码”类的标签，包括{{tag|pre}}、{{tag|code}}两种。如果要将前两种用于条目内的-{zh-hant:程式;zh-hans:程序}-范例，可以使用空转换标签<code><nowiki>-{}-</nowiki></code>强制启用转换。

==註釋==
{{reflist|refs=
<ref name="fallback">這為配搭後退（fallback）機制來限制所顯示語言的一種顯示方式，不會完全強制顯示某種特定的語言。當要顯示的語言在有效範圍之外時，用後退（fallback）機制，在原先要顯示的語言的後援語言當中選取在有效範圍中的語言，把要顯示的語言改為那語言。如果原先要顯示的語言和其後援語言皆沒有一種是在有效範圍之內，則以原文顯示，這時為 R 標旗的顯示方式。（註：雖然叫 zh ，但程式作實上只是不轉換時的內容，即是預設的內容。）</ref>
}}

==参见==
* [[mw:Writing_systems/Syntax|mw:Writing systems/Syntax]] - 此页面“语法”部分的英文翻译

[[Category:維基百科編輯|Category:維基百科編輯]]
[[Category:帮助文档|Z]]
[[Category:维基字词转换|Category:维基字词转换]]