{{Expert|time=2012-11-23}}
{{noteTA|G1=IT}}
[[File:VirtualBox2.png|300px]]，一種x86虛擬機器套件]]

在[[計算機技术|計算機技术]]中，'''虛擬化（技術）'''或'''虛擬技術'''（{{lang-en|Virtualization}}）是一種資源管理技術，是将计算机的各種[[資源_(計算機科學)|實體资源]]（[[CPU|CPU]]、[[内存|内存]]、[[磁盘空间|磁盘空间]]、[[網路適配器|網路適配器]]等），予以抽象、转换后呈现出来並可供分割、組合為一個或多個電腦組態環境。由此，打破實體結構間的不可切割的障礙，使用戶可以比原本的組態更好的方式來应用這些電腦硬體资源。這些資源的新虛擬部份是不受現有資源的架設方式，地域或物理組態所限制。一般所指的虛擬化資源包括計算能力和資料儲存。

== 定义 ==
由于目前[[信息技术|信息技术]]领域的很多企业都曾在宣传中将该企业的某种技术称为'''虚拟化技术'''，这些技术涵盖的范围可以从[[Java虚拟机|Java虚拟机]]技术到[[系统管理软件|系统管理软件]]，这就使得准确的界定虚拟技术变得困难。因此各种相关[[学术论文|学术论文]]在谈到虚拟技术时常常提到的便是如前面所提到的那个不严格的定义。
[[File:Virtualization.JPG|thumb]]

== 历史 ==
虚拟化技术起源于20世纪60年代末，[[美国|美国]][[IBM公司|IBM公司]]当时开发了一套被称作[[虚拟机监视器|虚拟机监视器]]（'''V'''irtual '''M'''achine '''M'''onitor）的软件，该软件作为计算机[[硬件|硬件]]层上面的一层软件抽象层，将计算机硬件虚拟分割成一个或多个[[虚拟机|虚拟机]]，并提供多用户对[[大型计算机|大型计算机]]的同时、交互访问。

== 虚拟化技術的类别 ==
=== 按虛擬的對象分類 ===
* [[硬件虚拟化|硬件虚拟化]]
* [[虚拟机|虚拟机]]（Virtual machine或VM），可以像真实机器一样运行程序的计算机的软件实现
** [[平台虚拟化|平台虚拟化]]，将操作系统和硬件平台资源分割开
*** [[完全虚拟化|完全虚拟化]]，敏感指令在操作系统和硬件之间被捕捉处理，客户操作系统无需修改，所有软件都能在虚拟机中运行，例如IBM CP/CMS，VirtualBox，VMware Workstation
*** [[硬件辅助虚拟化|硬件辅助虚拟化]]，利用硬件（主要是CPU）辅助处理敏感指令以实现完全虚拟化的功能，客户操作系统无需修改，例如VMware Workstation，Xen，KVM
*** [[部分虚拟化|部分虚拟化]]，针对部分应用程序进行虚拟，而不是整个操作系统
*** [[準虛擬化|準虛擬化]]/超虚拟化（paravirtualization），为应用程序提供与底层硬件相似但不相同的软件接口，客户操作系统需要进行修改。例如Xen的半虛擬化模式。
*** [[操作系统级虚拟化|操作系统级虚拟化]]，使操作系统内核支持多用户空间实体，例如Parallels Virtuozzo Containers、OpenVZ、LXC以及类Unix系统上的chroot，Solaris上的Zone
** [[应用程序虚拟化|应用程序虚拟化]]，在操作系统和应用程序间建立虚拟环境
*** [[便携式应用程序|便携式应用程序]]，允许程序在便携式设备中运行而不用在操作系统中安装
*** [[跨平台虚拟化|跨平台虚拟化]]，允许针对特定CPU或者操作系统的软件不做修改就能运行在其他平台上，例如Wine
*** [[虚拟设备|虚拟设备]]，运行于虚拟化平台之上，面向应用的虚拟机映像
*** [[模拟器|模拟器]]
* [[虚拟内存|虚拟内存]]，将不相邻的内存区，甚至硬盘空间虚拟成统一连续的内存地址
* [[存储虚拟化|存储虚拟化]]，将实体存储空间（如硬盘）分隔成不同的逻辑存储空间
* [[网络虚拟化|网络虚拟化]]，将不同网络的硬件和软件资源结合成一个虚拟的整体(请给出来源？）
** [[虚拟专用网络|虚拟专用网络]]（VPN），在大型网络（通常是Internet）中的不同计算机（节点）通过加密连接而组成的虚拟网络，具有类似局域网的功能
** [[存储器虚拟化|存储器虚拟化]]，将网络系统中的随机存储器聚合起来，形成统一的虚拟内存池
* [[桌面虚拟化|桌面虚拟化]]，在本地计算机显示和操作远程计算机桌面，在远程计算机执行程序和储存信息
* [[数据库虚拟化|数据库虚拟化]]
* [[软件虚拟化|软件虚拟化]]
* [[服务虚拟化|服务虚拟化]]
* 数据虚拟化 (data virtualization), 数据虚拟化是一种统一来自多个来源的数据的方法，这样应用程序，报告工具和最终用户就可以访问数据，而不需要有关原始来源，位置和数据结构的详细信息。<ref>{{Cite web|url=https://www.datawerks.com/data-virtualization/|title=Data Virtualization – dataWerks|accessdate=2018-04-12|work=www.datawerks.com|language=en-US}}</ref>

=== 按照抽象程度分類 ===
[[File:VT5levels.JPG|thumb]]
按照抽象程度的不同，常常把虚拟技术分为五个层次：

====[[指令集架構|指令集架構]]等級的虛擬化（Instruction Set Architecture Level） ====
指令集架構的虛擬化是透過軟體來模擬不同架構的處理器、記憶體、匯流排、磁碟控制卡、計時器等多個I/O設備，軟體會將虛擬機所發出的指令轉換為本機可以操作的指令在現有的硬體上執行。這種等級的虛擬化對於模擬相同處理器架構的平台可以提供很好的相容性，例如︰[[X86|x86架構]]、[[SPARC|Sparc架構]]、[[DEC_Alpha|Alpha架構]]。

若主機處理器可以執行由虛擬機轉換出來的指令，或是使用相同的指令集來完成任務，那就表示除了處理器以外的作業系統、I/O設備皆可不受特定平台所綁定，但由於虛擬機的每條指令都必須透過軟體來模擬，所以在效能會有較大程度的耗損。

這個分類底下代表性的有[[Bochs|Bochs]]以及[[QEMU|QEMU]]。

====[[硬體抽象|硬體抽象]]層等級的虛擬化（Hardware Abstraction Level） ====
硬體抽象層等級的虛擬化是由[[Hypervisor|虛擬機器監視器]]來隱藏不同廠商的處理器、記憶體、晶片組…等特徵，為這些虛擬機器提供抽象與統一的虛擬平台。運行此平台的電腦稱之為主體機器（Host Machine），而在此平台中運作的虛擬機稱為客體機器（Guest Machine），

目前大多數x86平台的商業電腦都在使用這種虛擬化，最主要是由於現今處理器廠商提供了硬體輔助虛擬化技術，例如︰第三世代的[[X86虚拟化|Intel VT-d]]、[[AMD-V|AMD-Vi]]皆提供虛擬機[[直接記憶體存取|直接記憶體存取]]（Direct Memory Access）以及對各種PCI介面的直接存取功能（PCI passthrough）。

這個分類底下代表性的有{{link-en|VMware_ESXi|VMware_ESXi}}、{{link-en|Hyper-V|Hyper-V}}、[[VirtualBox|Virtualbox]]、以及[[思杰系统|Citrix]]。

==== [[操作系统|作業系統]]等級的虛擬化（Operating System Level） ====
硬體抽象層等級的虛擬化中的[[全虚拟化|全虛擬化]]與作業系統底層間有非常高的隔離能力，支援不同的作業系統，安裝後不須要重新啟動主機、或修改開機程式（Boot Loader）以達到雙系統的目的，風險低、維護簡單。由於此等級的虛擬機可以訪問底層作業系統，因此使用者必須花費大量的時間來安裝與設定虛擬機器，接著才能開始評估或測試所需運作的軟體，這些設定包含了作業系統的安裝、安全性或相容性軟體的更新、網路、系統調教…等，如果所需的作業系統與底層作業系統相同，那麼其實它們所作的跟實際上安裝一台實體機器沒有什麼區別。

作業系統內核虛擬化可以最大限度的減少新增虛擬機的所需，在這個等級的虛擬機器共用實體主機上的硬體以及作業系統，呈現彼此獨立且隔離的虛擬機環境。

應用軟體的環境是由作業系統、函式庫、相依性軟體、特定於系統的資料結構或檔案系統，例如︰[[NTFS|NTFS]]或[[Ext3|Ext3]]，以及其他環境設定所組成。如果這些都保持不變，應用軟體很難發現與真實環境的區別。這是所有作業系統等級虛擬化的關鍵想法。

這個分類底下代表性的有[[Docker|Docker]]、[[虚拟专用服务器|VPS]]以及[[基于内核的虚拟机|KVM]]。

==== [[编程语言|程式語言]]等級的虛擬化（Programming Language Level） ====
傳統電腦是由[[指令集架構|指令集架構]]所驅動的一種機械語言，硬體的操作由特殊的I/O指令處理，也可以透過區塊映射（Mapping）來操作記憶體，此等級的虛擬化會將高階語言轉譯成一種名為[[字节码|位元組碼]]的語言，透過虛擬機器轉譯成為可以直接執行的命令。跨作業系統平台、跨語言皆為其優點。

這個分類底下代表性的有[[Java|Oracle Java]]、[[.NET框架|Microsoft . NET]]、[[Parrot虚拟机|Parrot]]。

==== [[函式庫|函式庫]]等級的虛擬化（Library Level） ====
大部分的應用程式都是使用由許多函式庫組成的[[应用程序接口|API]]（Application Programming Interface）來設計，使用動態連結的方式用於隱藏作業系統的細節，目的是提供程式設計師更簡單的工作。這也產生了一種新的虛擬化方式，使用不同的API與不同作業系統底層的[[应用二进制接口|ABI]]（Application Binary Interface）來進行模擬的工作。

這個分類底下代表性的有[[Wine|Wine]]以及[[适用于_Linux_的_Windows_子系统|WSL]]（Windows Subsystem for Linux）。

== 虚拟化技術的应用 ==
* [[服务器|服务器]]整合
* [[沙盒|沙盒]]（Sandboxing）
* 多运行环境
* 多操作系统
* 测试和性能监视
* 应用整合
* 虚拟硬件
* 软件移植
* 系统可管理性
* 测试/[[质量保证|质量保证]]

== 参考文献 ==
*Susanta Nanda, Tzi-cker Chiueh, "[https://web.archive.org/web/20160615070031/http://www.ecsl.cs.sunysb.edu/tr/TR179.pdf A Survey on Virtualization Technologies]";
*R.P.Goldberg, "Survey of Virtual Machine Research", Computer, June 1974, pp.34-45;
*G.J.Popek, R.P.Goldberg, "Formal Requirements for Virtualizable Third Generation Architectures," Comm.ACM, Vol.17, Nr.7, July 1974, pp.412-421;
*Joba Yeh (2018). [https://hdl.handle.net/11296/m9d8qw "Research on Big Data Analysis Platform and Services"], NDLTD in Taiwan, August 2018, pp.16-22.

== 相关条目 ==
* [[虚拟化发展时间线|虚拟化发展时间线]]
* [[硬件虚拟化|硬件虚拟化]]
** [[x86虚拟化|x86虚拟化]]
** [[VMware|VMware]]
** [[Virtual_PC|Virtual_PC]]
* [[虚拟机|虚拟机]]
** [[虚拟机监视器|虚拟机监视器]]
* [[软件虚拟化|软件虚拟化]]
* [[服务虚拟化|服务虚拟化]]
* [[虚拟设备|虚拟设备]]
* [[Docker|Docker]]

== 外部链接 ==
*[http://www.xuniji.com/article/view.asp?id=338 进入美妙的虚拟世界—虚拟系统探秘]{{Dead link|date=2018年6月 |bot=InternetArchiveBot |fix-attempted=no }}
*[http://www.kernelthread.com/publications/virtualization/ An introduction to Virtualization] 
*[http://www.vmware.com/pdf/virtualization.pdf#search=%22hypervisor%20VMware%20virtualization%20layer%22 VMware虚拟技术白皮书（英文）]

{{虛擬化技術}}

[[Category:虛擬化軟體|Category:虛擬化軟體]]