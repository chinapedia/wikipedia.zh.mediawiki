{{Documentation subpage}}
{{high-use|96843}}
<!-- Please place categories where indicated at the bottom of this page and interwikis at Wikidata (see [[Wikipedia:维基数据|Wikipedia:Wikidata]]) -->
{{further|Help:分類單元識別碼}}
{{Lua|Module:Taxonbar}}
{{Uses Wikidata|section=Taxon identifiers}}
{{Lua sidebar}}
{{TOC left}}

== Description ==
This metadata template links Wikipedia articles to various biological and {{tsl|en|taxonomic database||taxonomic database}}s. Taxonbar displays these links as short strings, indicating the unique [[標識符|identifier]] each database has assigned the taxon for catalogue purposes.

Taxonomic identifiers of each taxon are stored and retrieved from each taxon's corresponding [[维基数据|Wikidata]] entry, but can be overridden in individual articles with locally entered data. Adding the data to Wikidata is preferable.

This project is based on the work of {{Tl|Authority Control}} and [[d:Wikidata:WikiProject Taxonomy|Wikidata:WikiProject Taxonomy]]. If you are a template editor or Wikipedia administrator, you may contribute at '''[[模块:Taxonbar|Module:Taxonbar]]'''. Please discuss ideas/thoughts for improvement or use on {{tsl|en|Template:Taxonbar/talk||Template:Taxonbar/talk}}.
[[File:Taxonbar layout placement on English Wikipedia - Cuckoo wasp.png|thumb|Taxonbar is placed below all [[Wikipedia:导航模板|navigation templates]], except {{tsl|en|Wikipedia:Authority control||Authority control}} (not shown here).]]

== Position ==
{{See also|Wikipedia:Manual of Style/Layout}}
'''Please place Taxonbar correctly'''. As a metadata template, Taxonbar should be placed:
{{columns-list|colwidth=60em|
* Below all [[Wikipedia:列明来源|references]], [[Help:脚注|footnotes]], and [[Wikipedia:外部链接|external links]].
* Below all [[Wikipedia:导航模板|navigation templates]]—except Authority control
* Above the {{tsl|en|Wikipedia:Authority control||Authority control}} template.
* Above all [[Wikipedia:頁面分類|<nowiki>[[Category:]]</nowiki>]] and stub template codes in the editor.
}}

== Usage ==
'''Add Taxonbar to an article:'''
# In Source editing mode, insert <code><nowiki>{{Taxonbar}}</nowiki></code> '''below all other navigation templates except Authority control.'''
# Click "Show preview" to check placement and to see which Taxon identifiers are automatically pulled from Wikidata.
# If you have more identifiers to add, consider adding them to the article's Wikidata item (so that all versions of Wikipedia will automatically benefit). Be careful not to edit the structure or names of Wikidata taxon until you have become familiar with [[d:Wikidata:WikiProject Taxonomy|Wikidata:WikiProject Taxonomy]] and [[d:Wikidata:WikiProject Taxonomy/Tutorial|Wikidata:WikiProject Taxonomy/Tutorial]].

'''Basic code:'''
<pre><nowiki>{{Taxonbar}}</nowiki></pre>

== Taxon example ==
[[File:Scarlet Macaw RWD3.jpg|thumb|left|'''[[緋紅金剛鸚鵡|Scarlet macaw (''Ara macao'')]]''']]{{clear|left}}
<code><nowiki>{{Taxonbar}}</nowiki></code> when placed in the [[緋紅金剛鸚鵡|Scarlet macaw]] article:
{{Taxonbar | from=Q243761}}

== Basic use samples ==
{{See also|Module:Taxonbar/sandbox|Template:Taxonbar/testcases}}
{{flatlist|
* [[冠蓝鸦|Blue jay]]
* [[歐亞鴝|European robin]]
* ''[[雙孢蘑菇|Agaricus bisporus]]''
* {{tsl|en|American chestnut||American chestnut}}
* ''[[美洲黄莲|Nelumbo lutea]]''
* ''[[大腸桿菌|Escherichia coli]]''
* ''[[恶性疟原虫|Plasmodium falciparum]]''
* ''[[欧洲熊蜂|Bombus terrestris]]''
* [[犬属|Canis]]
* [[君主斑蝶|Monarch butterfly]]
}}

==Taxon identifiers==
{{For2|databases supported by Wikidata:WikiProject Taxonomy|[[d:Wikidata:WikiProject Taxonomy#Databases]]}}
The template can automatically get its information from the following properties on [[维基数据|Wikidata]]. This is configured in [[模块:Taxonbar/conf|Module:Taxonbar/conf]].

{{#invoke:Taxonbar/confdoc|confdoc}}
<!--'''<nowiki>*</nowiki>'''(support for this parameter temporarily disabled)-->
<!-- If none of these is applicable, it can be forced with: <nowiki>{{Authority control |MBA={{#Property:P434}} }}</nowiki> which for [[披頭四樂隊|The Beatles]] would produce:
{{Authority control |MBA=b10bbbfc-cf9e-42e0-be17-e2c3e1d2600d }}
Note that for The Beatles <nowiki>{{Authority control}}</nowiki> would work out of the box already. -->

=== Hide specific identifier (optional) ===
Individual identifiers listed in the table above can be removed(hidden) from the bar by setting the corresponding parameter to <code>no</code>. This is useful when trying to reduce the number of links within Taxonbar. Spaces are optional.  There is no sense in removing too many identifiers, for example: removing plant or fungi identifiers from an animal taxon would have no effect as these parameters will not show up on an animal taxon in the first place.  It is best to preview <nowiki>{{Taxonbar}}</nowiki> on the page and decide what entries provide little relevant data.  Plant species will have the most entries and are most likely in need of hiding some entries if the goal is to keep the bar on one line.

Example:
To remove FOC, IPNI, and AFPD, the code would look like:
<pre><nowiki>{{Taxonbar | foc = no | ipni = no| apdb = no }}</nowiki></pre>

On [[小果咖啡|Coffea arabica]], the result is:

{{Taxonbar | from=Q47685 | foc = no | ipni = no| apdb = no }}

===Excluded databases===
These databases are available at Wikidata, but are excluded by default here (en.wiki) for reasons described below.
{| class="wikitable sortable"
|-
! data-sort-type=number style="white-space: nowrap;"|Wikidata property name &nbsp;&nbsp;&nbsp;&nbsp; !! ID !! Authority !! Description !! Language
|-
|{{Taxonbar/ExcludedProperty|4902}}||Spanish
|-
|{{Taxonbar/ExcludedProperty|5263}}||Czech
|-
|{{Taxonbar/ExcludedProperty|6115}}||French
|-
|{{Taxonbar/ExcludedProperty|4630}}||French
|-
|{{Taxonbar/ExcludedProperty|1939}}||Swedish
|-
|{{Taxonbar/ExcludedProperty|6043}}||French
|-
|{{Taxonbar/ExcludedProperty|5179}}||Catalan
|-
|{{Taxonbar/ExcludedProperty|6094}}||German
|-
|{{Taxonbar/ExcludedProperty|4311}}||Dutch
|-
|{{Taxonbar/ExcludedProperty|6054}}||French
|-
|{{Taxonbar/ExcludedProperty|2794}}||French
|-
|{{Taxonbar/ExcludedProperty|6025}}||French
|-
|{{Taxonbar/ExcludedProperty|3102}}||Russian
|-
|{{Taxonbar/ExcludedProperty|3186}}||French
|-
|{{Taxonbar/ExcludedProperty|3105}}||French
|-
|{{Taxonbar/ExcludedProperty|4125}}||French
|-
|{{Taxonbar/ExcludedProperty|6142}}||Dutch
|-
|{{Taxonbar/ExcludedProperty|3322}}||Dutch
|-
|{{Taxonbar/ExcludedProperty|4664}}||Portuguese
|}

==Additional parameters==
Some taxon identifiers not currently in Wikidata can be added via additional parameters, however, adding the data to Wikidata is preferable.

Example:
<pre><nowiki>{{Taxonbar | emonocot = 280381 | Wikispecies = Lilium }}</nowiki></pre>

On ''[[百合属|Lilium]]'', the result is:

{{Taxonbar | from=Q5194627 | emonocot = 280381 | Wikispecies = Lilium }}

where the taxon identifier in the [[世界選定植物科別目錄|World Checklist of Selected Plant Families]] has been added to those picked up from Wikidata.

{| class="wikitable sortable"
|-
!Parameter!!Database!!Property URL/Interwiki link
|-
|eMonocot||{{tsl|en|eMonocot||eMonocot}}||<nowiki>http://e-monocot.org/taxon/urn:kew.org:wcs:taxon:$1</nowiki>
|-
|emonocotfamily||{{tsl|en|eMonocot||eMonocot}}||<nowiki>http://e-monocot.org/taxon/urn:kew.org:wcs:family:$1</nowiki>
|-
|wsc-species||{{tsl|en|World Spider Catalog||World Spider Catalog}}||<nowiki>http://www.wsc.nmbe.ch/search?sFamily=&fMt=begin&sGenus=&gMt=begin&sSpecies=&sMt=begin&mMt=exact&multiPurpose=slsid&sMulti=$1</nowiki>
|-
|wsc-genus||{{tsl|en|World Spider Catalog||World Spider Catalog}}||<nowiki>http://www.wsc.nmbe.ch/search?sFamily=&fMt=begin&sGenus=&gMt=begin&sSpecies=&sMt=begin&mMt=exact&multiPurpose=glsid&sMulti=$1</nowiki>
|-
|wsc-family||{{tsl|en|World Spider Catalog||World Spider Catalog}}||<nowiki>http://www.wsc.nmbe.ch/search?sFamily=&fMt=begin&sGenus=&gMt=begin&sSpecies=&sMt=begin&mMt=exact&multiPurpose=flsid&sMulti=$1</nowiki>
|-
|Wikispecies||[[維基物種|Wikispecies]]||Wikispecies:$1
|}

==Multiple Wikidata entries==

Some taxa will exist under multiple names (synonyms) on Wikidata. To add these synonyms, you can use the {{para|from2}}, {{para|from3}}, etc. parameters to specify their Wikidata IDs. The parameter {{para|from}} / {{para|from1}} will be automatically determined by the associated Wikidata entry. While not required, it is preferable, from a maintenance perspective, to specify the Wikidata entry via the {{para|from}} / {{para|from1}} parameter. Parameters {{para|from2}}, etc., can be specified manually; this can be useful if the associated Wikidata entry differs  from the taxon name of the en:Wikipedia article.

If there is more than one row, the taxon name from Wikidata will be shown in the leftmost column — to overwrite this, use the {{para|title}} / {{para|title1}}, {{para|title2}}, {{para|title3}}, etc. parameters. You can add taxon identifiers not present in Wikidata by appending the appropriate number to the end of the parameter name — for example, to add emonocot to the second row, use {{para|emonocot2}}.

For example, {{tlx|Taxonbar|2=from=Q26972265|3=from2=Q20717272}}, when placed on the page [[犬|Dog]] produces:
{{Taxonbar|from=Q26972265|from2=Q20717272}}

The same approach can be used when monotypic taxa have a single article, but there are multiple entries in Wikidata. For example, at ''{{tsl|en|Haptanthus||Haptanthus}}'', which covers the genus and its sole species, {{tlx|Taxonbar|2=from1=Q15715555|3=from2=Q133951}} produces:
{{Taxonbar|from1=Q15715555|from2=Q133951}}

===Basionyms===

{{tsl|en|Basionyms||Basionyms}} available on Wikidata (via {{Wikidata property link|P566}}) are automatically appended. You may also manually specify the basionym via {{para|from#}} to customize its location.

For example, both 
:{{tlx|Taxonbar|2=from1=Q43372357|3=from2=Q164254}} and
:{{tlx|Taxonbar|2=from1=Q43372357|3=from2=Q164254|4=from3=Q21977691}}
would produce identical taxonbars for ''{{tsl|en|Ponerorchis cucullata||Ponerorchis cucullata}}'':
{{Taxonbar|from1=Q43372357|from2=Q164254|from3=Q21977691}}

or {{tlx|Taxonbar|2=from1=Q43372357|3=from2=Q21977691|4=from3=Q164254}} for a customized location:
{{Taxonbar|from1=Q43372357|from2=Q21977691|from3=Q164254}}

==More taxon examples==
{{See also|Module:Taxonbar/sandbox|Template:Taxonbar/testcases}}
{{Purge page}}{{clear|left}}
[[File:Coffee-230022.jpg|lthumb|50px]] Arabica coffee, ''[[小果咖啡|Coffea arabica]]''
{{Taxonbar|from=Q47685}}
[[File:Common_Milkweed_(Asclepias_syriaca)_(14911935302).jpg|lthumb|50px]] Common Milkweed, ''{{tsl|en|Asclepias syriaca||Asclepias syriaca}}''
{{Taxonbar|from=Q158295}}
[[File:Newborn Monarch being released (15476827630).jpg|lthumb|50px]] [[君主斑蝶|Monarch butterfly]], ''Danaus plexippus''
{{Taxonbar|from=Q212398}}
[[File:Melanism_in_Panthera_Onca.jpg|lthumb|50px]] [[美洲豹|Jaguar]], ''Panthera onca''
{{Taxonbar||from=Q35694}}
[[File:Eastern_Bluebird-27527-7.jpg|lthumb|50px]] [[東藍鴝|Eastern bluebird]], ''Sialia sialis''
{{Taxonbar|from=Q600880}}
[[File:Firefly_%E3%83%9B%E3%82%BF%E3%83%AB_%E8%9B%8D_Hotaru.jpg|lthumb|50px]] [[萤科|Firefly]], ''Lampyridae''
{{Taxonbar|from=Q25420}}
[[File:Amanita muscaria 3 vliegenzwammen op rij.jpg|lthumb|50px]] fly agaric, ''[[毒蠅傘|Amanita muscaria]]''
{{Taxonbar|from=Q131227}}
[[File:Saccharomyces_cerevisiae_SEM.jpg|lthumb|50px]], ''[[釀酒酵母|Saccharomyces cerevisiae]]''
{{Taxonbar|from=Q719725}}
[[File:Lactobacillus_acidophilus_SEM.jpg|lthumb|50px]] ''[[嗜酸乳桿菌|Lactobacillus acidophilus]]''
{{Taxonbar|from=Q132644}}
[[File:Plasmodium_falciparum_01.png|lthumb|50px]] ''[[恶性疟原虫|Plasmodium falciparum]]''
{{Taxonbar|from=Q311383}}

== Module editing — to-do list ==
* Continue to add support for new, useful parameters ([https://query.wikidata.org/#SELECT%20%3Fitem%20WHERE%0A%7B%0A%20%20%23%20all%20instance%20of%3A%20Wikidata%20property%20to%20identify%20taxa%20%28Q42396390%29%0A%20%20%3Fitem%20wdt%3AP31%20wd%3AQ42396390%20.%0A%7D search])

== Module editing — to-don't list ==
* Import synonym QIDs via {{Wikidata property link|P1420}} from Wikidata ({{tsl|en|Template talk:Taxonbar/Archive 4||talk}})

==另请参见==
* [[幫助:分類單元識別碼]]
* [[模块:Taxonbar]]——支持本模板運作的 [[Lua]] 腳本
* [[模块:Taxonbar/sandbox]]
* [[模板:Taxonbar/testcases]]

==Other links==
* {{tl|ThePlantList}}
* {{tl|Authority control}}
* {{tl|Taxobox}}
* {{tsl|en|Wikipedia:Automated taxobox system/intro||Wikipedia:Automated taxobox system/intro}}
* Other templates in [[:Category:Biology external link templates]]
* Other templates in [[:Category:Botany external link templates]]

==Tracking categories==
===Maintenance required===
* {{clc|Taxonbar pages requiring a Wikidata item‎}}
* {{clc|Taxonbars desynced from Wikidata}}
* {{clc|Taxonbars on possible non-taxon pages}}
* {{clc|Taxonbars with duplicate from parameters}}
* {{clc|Taxonbars with invalid from parameters}}
* {{clc|Taxonbars with manual taxon IDs differing from Wikidata}}
* {{clc|Taxonbars with unknown parameters}}

===Maintenance desired===
* {{clc|Taxonbars without primary Wikidata taxon IDs}} — find/add taxon IDs to the primary Wikidata item
* {{clc|Taxonbars without secondary Wikidata taxon IDs}} — find/add taxon IDs to secondary Wikidata item(s)
* {{clc|Taxonbars using manual taxon IDs}} — migrate IDs to Wikidata, if possible
* {{clc|Taxonbars with manual taxon IDs identical to Wikidata}} — remove duplicate(s) on Wikipedia
* {{clc|Taxonbars without from parameter}} — add from

===Tracking only (no error)===
* {{clc|Taxonbars using multiple manual Wikidata items}}
* {{clc|Taxonbars with 20–24 taxon IDs}}
* {{clc|Taxonbars with 25–29 taxon IDs}}
* {{clc|Taxonbars with 30–34 taxon IDs}}
* {{clc|Taxonbars with 35–39 taxon IDs}}
* {{clc|Taxonbars with 40+ taxon IDs}}
* {{clc|Taxonbars with automatically added basionyms‎}}
* {{clc|Taxonbars with automatically added original combinations}}
* {{clc|Taxonbars with automatically added monotypic genera}}

<includeonly>{{#switch:{{SUBPAGENAME}}|sandbox3|sandbox2|sandbox=|#default=
[[Category:生物外部資源模板]]
[[Category:植物學外部資源連結模板]]
[[Category:生物学信息框模板]]
[[Category:使用维基数据的外部链接模板]]
[[Category:使用维基数据信息的模板]]
}}</includeonly>