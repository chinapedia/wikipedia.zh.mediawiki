<includeonly><!-- 在這裡加入模板的保護標識 --></includeonly><noinclude>{{template doc page viewed directly}}</noinclude>
<!-- 在本行下編輯模板說明 -->

此頁面是為用戶解釋有關於如何允許或排除[[Wikipedia:机器人|機器人]]對頁面的瀏覽訪問並留下訊息，相關的指令非常容易理解，因下有範例在此不贅述。這類模板只應適用於用戶頁或其討論頁當中（即以「User:」或「User_talk:」這2個[[Wikipedia:命名空间|命名空间]]開首的頁面），並不建議套用於其他頁面，務請三思。對於機械人管理者，建議閣下遵從頁面中<nowiki>{{bots}}及{{nobots}}</nowiki>的指示。

用戶須意識到透過選擇排除來自機器人的通知，根據他們所選擇的標籤，機器人將不會被通知有關他們已編輯或上傳資料的訊息（如版權問題、條目DYK等訊息）。

對於百科條目空間，尤其注意：
* 小心模板作用範圍過大，帶來副作用；
* 應用於處置機器人持有者或機器人社群的根本問題；
* 一旦相關問題解決，請移除模板標籤。

== 機器人語法 ==
'''<nowiki>{{nobots}}</nowiki>'''                封鎖所有的機器人帳戶訪問
'''<nowiki>{{bots}}</nowiki>'''                  允許所有機器人帳戶訪問

'''<nowiki>{{bots|allow=<botlist>}}</nowiki>'''  封鎖所有列表指定之外的機器人帳戶
'''<nowiki>{{bots|deny=<botlist>}}</nowiki>'''   封鎖列表指定之所有機器人帳戶

''以下指令使用於過濾指定用戶名的機器人帳戶（以半形逗號作間隔），另關鍵字“AWB”可以過濾所有使用[[Wikipedia:AutoWikiBrowser|維基自動瀏覽器]]的機器人：''

'''<nowiki>{{bots|allow=HagermanBot,Werdnabot}}</nowiki>'''
'''<nowiki>{{bots|deny=AWB}}</nowiki>'''

''<botlist> 可以透過 "none" or "all" 選項允許/封鎖機器人訪問，如下：''
'''<nowiki>{{bots|allow=all}}</nowiki>'''      允許所有機器人帳戶訪問
'''<nowiki>{{bots|allow=none}}</nowiki>'''     封鎖所有的機器人帳戶訪問

'''<nowiki>{{bots|deny=all}}</nowiki>'''       封鎖所有的機器人帳戶訪問
'''<nowiki>{{bots|deny=none}}</nowiki>'''      允許所有機器人帳戶訪問

但須注意的是，由於機器人在它們創建時不是為了不通知用戶，因此并非所有机器人会遵守以上标签，这取决于机器人程序的相关设定。

== 排除所有機器人通知 ==
另外一種排除通知法是按通知種類而過濾，當用戶套用至個人用戶頁面時，相關類型的停滯將會被過濾，當用戶套用以下模板就代表其同意本模板使用原則。但如果用在非其個人用戶頁面放置以下模板將會被視為[[Wikipedia:破坏|破壞]]。

使用這種選擇性排除的方法，用戶將不會受到來自機器人的負面通知，但透過人工編輯的負面通知/警告將在排除範圍之外。

'''<nowiki>{{bots|optout=all}}</nowiki>'''            過濾所有機器人所發出的所有通知（更多選項請參考以下列表）
'''<nowiki>{{bots|optout=nosource}}</nowiki>'''       過濾所有機器人所發出有關上傳資料[[Template:Image source|缺乏來源]]的通知
'''<nowiki>{{bots|optout=nolicense}}</nowiki>'''      過濾所有機器人所發出有關上傳資料[[Template:Image copyright request|缺乏授權]]的通知
'''<nowiki>{{bots|optout=orfud}}</nowiki>'''          過濾所有機器人所發出有關上傳[[Template:Di-orphaned fair use-notice|合理使用資料缺乏使用]]的通知
'''<nowiki>{{bots|optout=norationale}}</nowiki>'''    過濾所有機器人所發出有關上傳資料[[Template:Missing rationale|合理使用原因]]的通知
'''<nowiki>{{bots|optout=replaceable}}</nowiki>'''    過濾所有機器人所發出有關上傳資料[[Template:Di-replaceable fair use-notice|不符合合理使用標準]]的通知
'''<nowiki>{{bots|optout=bettersource}}</nowiki>'''   過濾所有機器人所發出有關上傳資料被[[Template:Bsr-user|要求更佳來源]]的通知
'''<nowiki>{{bots|optout=afd}}</nowiki>'''            過濾所有機器人所發出有關[[Template:AFDWarningNew|新條目被提名刪除]]或[[Template:AFDWarning|其他條目]]/[[Template:Adw|表格]]的通知
'''<nowiki>{{bots|optout=ifd}}</nowiki>'''            過濾所有機器人所發出有關上傳[[Template:Idw|圖像被提名刪除]]或[[Template:Idw-multi|其他資料（如音影像）]]的通知
'''<nowiki>{{bots|optout=prod}}</nowiki>'''           過濾所有機器人所發出有關上傳[[Template:PRODWarning|資料被納入刪除候選]]或[[Template:PRODNote|類似]]的通知


以上選項可透過逗號間隔相加使用，例如：
'''<nowiki>{{bots|optout=nosource,nolicense}}</nowiki>'''                 過濾所有機器人所發出有關上傳資料[[Template:Image source|缺乏來源]]以及[[Template:Image copyright request|缺乏授權]]的通知

'''<nowiki>{{bots|optout=orfud,norationale,replaceable}}</nowiki>'''      過濾所有機器人所發出有關上傳資料[[Template:Di-orphaned fair use-notice|合理使用]]的通知

=== 限制 ===
有些通知不能以此模板排除，此類通知包括但不限於：
# 違反版權的通知
# 破壞（及類似行為）的通知
# 任何不含上方標籤的通知（有任何被遺忘的通知標籤？請於[[Template_talk:Bots|討論頁]]告訴我們。<nowiki>;]</nowiki>）

== 置入使用 ==
*Pywikipediabot於r4096後支持<nowiki>{{bots}}及{{nobots}}</nowiki>，然而可用參數將其忽略。
*[[Wikipedia:AutoWikiBrowser|自動維基瀏覽器]]由3.2.0.0起完全支持<nowiki>{{bots}}及{{nobots}}</nowiki>。另外，將用戶名設置為awb可以拒絕所有自動維基瀏覽器機械人。自動維基瀏覽器亦有選項可忽略這些模板。

=== 範例 ===
==== PHP ====
<syntaxhighlight lang="php">
function allowBots( $text ) {
    global $user;
    if (preg_match('/\{\{(nobots|bots\|allow=none|bots\|deny=all|bots\|optout=all|bots\|deny=.*?'.preg_quote($user,'/').'.*?)\}\}/iS',$text)) { return false; }
    return true;
}
</syntaxhighlight>

==== Perl ====

<syntaxhighlight lang="perl">
sub allowBots {
    my($text, $user, $opt) = @_;
    return 0 if $text =~ /{{nob[o]ts}}/;
    return 1 if $text =~ /{{b[o]ts}}/;
    if($text =~ /{{bots\s*\|\s*allow\s*=\s*(.*?)\s*}}/s){
        return 1 if $1 eq 'all';
        return 0 if $1 eq 'none';
        my @bots = split(/\s*,\s*/, $1);
        return (grep $_ eq $user, @bots)?1:0;
    }
    if($text =~ /{{bots\s*\|\s*deny\s*=\s*(.*?)\s*}}/s){
        return 0 if $1 eq 'all';
        return 1 if $1 eq 'none';
        my @bots = split(/\s*,\s*/, $1);
        return (grep $_ eq $user, @bots)?0:1;
    }
    if(defined($opt) && $text =~ /{{bots\s*\|\s*optout\s*=\s*(.*?)\s*}}/s){
        return 0 if $1 eq 'all';
        my @opt = split(/\s*,\s*/, $1);
        return (grep $_ eq $opt, @opt)?0:1;
    }
    return 1;
}
</syntaxhighlight>

==== C# ====
<syntaxhighlight lang="csharp">
public static bool AllowBots(string text, string user)
{
    return !Regex.IsMatch(text, @"\{\{(nobots|bots\|(allow=none|deny=(?!none).*(" + user.Normalize() + @"|all)|optout=all))\}\}", RegexOptions.IgnoreCase);
}
</syntaxhighlight>

==== Java ====
<syntaxhighlight lang="java">
public static boolean AllowBots(String text, String user)
{
      return !Regex.Match(text, "\\{\\{(nobots|bots\\|(allow=none|deny=(.*?" + user.Normalize() + ".*?|all)|optout=all))\\}\\}", RegexOptions.IgnoreCase).Success;
}
</syntaxhighlight>

==== JavaScript ====
<syntaxhighlight lang="javascript">
function allowBots(text, user){
  if (!new RegExp("\\{\\{\\s*(nobots|bots[^}]*)\\s*\\}\\}", "i").test(text)) return true;
  return (new RegExp("\\{\\{\\s*bots\\s*\\|\\s*deny\\s*=\\s*([^}]*,\\s*)*"+user+"\\s*(?=[,\\}])[^}]*\\s*\\}\\}", "i").test(text)) ? false : new RegExp("\\{\\{\\s*((?!nobots)|bots(\\s*\\|\\s*allow\\s*=\\s*((?!none)|([^}]*,\\s*)*"+user+"\\s*(?=[,\\}])[^}]*|all))?|bots\\s*\\|\\s*deny\\s*=\\s*(?!all)[^}]*|bots\\s*\\|\\s*optout=(?!all)[^}]*)\\s*\\}\\}", "i").test(text);
}
</syntaxhighlight>

==== Python ====
<syntaxhighlight lang="python">
def Allowbots(text, user):
    if (re.search(r'\{\{(nobots|bots\|(allow=none|deny=.*?' + user + r'.*?|optout=all|deny=all))\}\}', text)):
        return False
    return True
</syntaxhighlight>

== 參見 ==
* 元維基（Meta） — [[m:Template:Bots|Template:Bots]] 

<includeonly>
<!-- ADD CATEGORIES BELOW THIS LINE -->
[[Category:維基百科工具模板]]
[[Category:維基百科機械人模板]]
</includeonly>