{{NoteTA
|G1 = IT
}}

{{Infobox programming language
| paradigm               = [[声明式编程|声明式]]
| year                   = 1974
| designer               = {{tsl|en|Donald D. Chamberlin|}}<br />{{tsl|en|Raymond F. Boyce|}}
| developer              = [[國際標準化組織|國際標準化組織]]/[[国际电工委员会|国际电工委员会]]
| latest_release_version = {{tsl|en|SQL:2016|}}
| latest_release_date    = 2016
| turing-complete        = No
| typing                 = [[類型系統|類型系統]], [[強型別|強型別]]
| implementations        = {{tsl|en|List of relational database management systems||詳見資料庫系統列表}}
| dialects               = SQL-86, SQL-89, [[SQL-92|SQL-92]], {{tsl|en|SQL:1999|}}, {{tsl|en|SQL:2003|}}, {{tsl|en|SQL:2006|}}, {{tsl|en|SQL:2008|}}, {{tsl|en|SQL:2011|}}
| influenced_by          = [[Datalog|Datalog]]
| influenced             = {{tsl|en|Common Query Language||CQL}}, [[语言集成查询|语言集成查询]], {{tsl|en|Salesforce Object Query Language||SOQL}}, [[Windows_PowerShell|Windows PowerShell]],<ref name=ars>{{cite web |last=Paul |first=Ryan |title=A guided tour of the Microsoft Command Shell |url=http://arstechnica.com/business/news/2005/10/msh.ars/4 |publisher=Ars Technica |accessdate=10 April 2011 |archive-date=2018-12-25 |archive-url=https://web.archive.org/web/20181225011117/https://arstechnica.com/information-technology/2005/10/msh/4/ |dead-url=no }}</ref> {{tsl|en|Java Persistence Query Language||JPQL}}, [[面向Java对象查询|面向Java对象查询]]
| operating_system       = [[跨平台|跨平台]]
| website                = 
| fileformat             = 
| wikibooks              = Structured Query Language
}}
{{Infobox file format
| name                   = SQL (file format)
| icon                   = 
| extension              = .sql
| mime                   = application/sql<ref>{{cite web|url=http://www.iana.org/assignments/media-types/application/sql|title=Media Type registration for application/sql|publisher=[[互联网号码分配局|Internet Assigned Numbers Authority]]|date=10 April 2013|accessdate=10 April 2013|archive-date=2018-01-24|archive-url=https://web.archive.org/web/20180124072057/http://www.iana.org/assignments/media-types/application/sql|dead-url=no}}</ref><ref>{{cite web|url=http://tools.ietf.org/html/rfc6922|title=The application/sql Media Type, RFC 6922|page=3|publisher=[[互联网工程任务组|Internet Engineering Task Force]]|date=April 2013|accessdate=10 April 2013|archive-date=2016-10-18|archive-url=https://web.archive.org/web/20161018203430/https://tools.ietf.org/html/rfc6922|dead-url=no}}</ref>
| uniform type           =
| owner                  = [[國際標準化組織|ISO]]/[[国际电工委员会|IEC]]
| released               = {{Start date|1986|df=yes}}
| latest release version = {{tsl|en|SQL:2016|}}
| latest release date    = {{Start date and age|2016|df=yes}}
| genre                  = Database
| standard               = ISO/IEC 9075
| free                   = Yes
| url                    = {{URL|https://www.iso.org/standard/63555.html}}
}}

'''SQL'''（{{IPAc-en|audio=En-us-SQL.ogg|ˈ|ɛ|s|_|k|juː|_|ˈ|ɛ|l}}<ref name=learningSQL>{{ cite book |last= Beaulieu | first = Alan |title=Learning SQL |url= https://archive.org/details/learningsql0000beau_p5d6 |editor=Mary E Treseler |publisher=O'Reilly |location=Sebastapol, CA, USA |date=April 2009 |edition= 2nd | isbn = 978-0-596-52083-0}}</ref>或{{IPAc-en|audio=En-us-sequel.ogg|ˈ|s|iː|k|w|ə|l}}<ref>{{ cite web | title=SQL, n. | website=Oxford English Dictionary | publisher=Oxford University Press | accessdate=2014-11-27 | url=http://www.oed.com/view/Entry/260112?redirectedFrom=SQL#eid }}</ref>，'''Structured Query Language'''，'''结构化查询语言'''<ref>{{cite web
| author=Encyclopedia Britannica
| title=SQL
| url=http://www.britannica.com/EBchecked/topic/569684/SQL
| accessdate=2013-04-02
| archive-date=2018-12-25
| archive-url=https://web.archive.org/web/20181225011108/https://www.britannica.com/technology/SQL
| dead-url=no
}}</ref><ref>From Oxford Dictionaries: "Definition of SQL - abbreviation, Structured Query Language, an international standard for database manipulation."
{{cite web
| author=Oxford Dictionaries
| title=SQL
| url=http://oxforddictionaries.com/definition/american_english/SQL
| accessdate=2017-10-10
| archive-date=2016-08-03
| archive-url=https://web.archive.org/web/20160803161611/http://www.oxforddictionaries.com/definition/american_english/sql
| dead-url=no
}}</ref><ref>{{cite web
| author=IBM
| title=SQL Guide
| url=http://publib.boulder.ibm.com/infocenter/soliddb/v6r3/topic/com.ibm.swg.im.soliddb.sql.doc/doc/tables.rows.and.columns.html
}}{{Dead link|date=2020年2月 |bot=InternetArchiveBot |fix-attempted=yes }}</ref><ref>From Microsoft: "Structured Query Language, invented at IBM in the 1970s. It is more commonly known by its acronym, SQL .."
{{cite web
| author=Microsoft
| title=Structured Query Language (SQL)
| url=http://msdn.microsoft.com/en-gb/library/windows/desktop/ms714670(v=vs.85).aspx
| accessdate=2017-10-10
| archive-date=2016-03-12
| archive-url=https://web.archive.org/web/20160312194206/https://msdn.microsoft.com/en-gb/library/windows/desktop/ms714670(v=vs.85).aspx
| dead-url=no
}}</ref>）是一种[[特定目的程式语言|特定目的程式语言]]，用于管理[[关系数据库管理系统|关系数据库管理系统]]（RDBMS），或在[[关系流数据管理系统|关系流数据管理系统]]（RDSMS）中进行流处理。

SQL基于[[关系代数_(数据库)|关系代数]]和[[元组关系演算|元组关系演算]]，包括一个[[数据定义语言|数据定义语言]]和[[数据操纵语言|数据操纵语言]]。SQL的范围包括数据插入、查询、更新和删除，[[Schema_(数据库)|数据库模式]]创建和修改，以及数据访问控制。尽管SQL经常被描述为，而且很大程度上是一种[[声明式编程|声明式编程]]（[[第四代程式语言|4GL]]），但是其也含有[[过程式编程|过程式编程]]的元素。

SQL是对[[埃德加·科德|埃德加·科德]]的[[关系模型|关系模型]]的第一个商业化语言实现，这一模型在其1970年的一篇具有影响力的[[论文|论文]]《一个对于大型共享型数据库的关系模型》<ref name="codd-relational-model">{{cite journal | last = Codd | first = Edgar F | title = A Relational Model of Data for Large Shared Data Banks | journal = Communications of the ACM | volume = 13 | issue = 6 | pages = 377–87 | publisher = Association for Computing Machinery | date = June 1970 | url = http://www.acm.org/classics/nov95/toc.html | accessdate = 2007-06-09 | doi = 10.1145/362384.362685 | deadurl = yes | archiveurl = https://web.archive.org/web/20070612235326/http://www.acm.org/classics/nov95/toc.html | archivedate = 2007-06-12 }}</ref>中被描述。尽管SQL并非完全按照[[科德十二定律|科德的关系模型]]设计，但其依然成为最为广泛运用的数据库语言。
<ref name="SQL-Fundamentals">{{cite web | last = Chapple | first = Mike | title = SQL Fundamentals | work = Databases | publisher = About.com | url = http://databases.about.com/od/sql/a/sqlfundamentals.htm | accessdate = 2009-01-28 | archive-date = 2009-02-22 | archive-url = https://web.archive.org/web/20090222225300/http://databases.about.com/od/sql/a/sqlfundamentals.htm | dead-url = no }}</ref><ref name="IBM-sql">{{cite web | title = Structured Query Language (SQL) | publisher = International Business Machines | url = http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=com.ibm.db2.udb.admin.doc/doc/c0004100.htm | date = October 27, 2006 | accessdate = 2007-06-10 }}</ref>

SQL在1986年成为[[美国国家标准学会|美国国家标准学会]]（ANSI）的一项[[标准|标准]]，在1987年成为[[国际标准化组织|国际标准化组织]]（ISO）标准<ref name="ISO/IEC">{{cite web | url = http://www.iso.org/iso/catalogue_detail.htm?csnumber=45498 | title = ISO/IEC 9075-1:2008: Information technology – Database languages – SQL – Part 1: Framework (SQL/Framework) | accessdate = 2017-10-10 | archive-date = 2012-02-03 | archive-url = https://www.webcitation.org/65AHDqhgg?url=http://www.iso.org/iso/catalogue_detail.htm?csnumber=45498 | dead-url = no }}</ref>。此后，这一标准经过了一系列的增订，加入了大量新特性。虽然有这一标准的存在，但大部分的SQL代码在不同的数据库系统中并不具有完全的[[跨平台|跨平台]]性。

== 歷史 ==
在1970年代初，由[[IBM|IBM]]公司San Jose,California[[研究|研究]][[實驗室|實驗室]]的[[埃德加·科德|埃德加·科德]]發表將資料組成表格的應用原則（Codd's Relational Algebra）。1974年，同一實驗室的D.D.Chamberlin和R.F. Boyce對Codd's Relational Algebra在研制关系数据库管理系统System R中，研制出一套規範語言-SEQUEL（Structured English Query Language），並在1976年11月的IBM Journal of R&D上公布新版本的SQL（叫SEQUEL/2）。1980年改名為SQL。

1979年ORACLE公司首先提供商用的SQL，[[IBM_DB2|IBM公司在DB2]]和SQL/DS数据库系统中也实现了SQL。

1986年10月，美国ANSI采用SQL作为关系数据库管理系统的标准语言（ANSI X3. 135-1986），后为国际标准化组织（ISO）采纳为国际标准。

1989年，美国ANSI采纳在ANSI X3.135-1989报告中定义的关系数据库管理系统的SQL标准语言，称为ANSI SQL 89，该标准替代ANSI X3.135-1986版本。该标准为下列组织所采纳：
*国际标准化组织（ISO），为ISO 9075-1989报告“Database Language SQL With Integrity Enhancement”
*美国联邦政府，发布在The Federal Information Processing Standard Publication(FIPS PUB)127
目前，所有主要的关系数据库管理系统支持某些形式的SQL，大部分数据库至少遵守ANSI SQL89标准。

ANSI SQL92标准在交叉连接（cross join）和内部连接之上，新增加了外部连接，并支持在FROM子句中写连接表达式。支持集合的并运算、交运算。支持[[Case_(SQL)|Case (SQL)]]表达式。支持CHECK约束。创建临时表。支持cursor。支持[[事务隔离|事务隔离]]。

== 语法 ==
{{main|SQL语法}}
[[File:SQL_ANATOMY_wiki.svg|thumb]]

SQL语言分成了几种要素，包括：

* 子句，是语句和查询的组成成分。（在某些情况下，这些都是可选的。）<ref>ANSI/ISO/IEC International Standard (IS). Database Language SQL—Part 2: Foundation (SQL/Foundation). 1999.</ref>
* 表达式，可以产生任何[[变量_(程序设计)|标量]]值，或由{{le|列 (数据库)|column (database)|列}}和{{le|行 (数据库)|row (database)|行}}组成的[[数据库表|数据库表]]
* 谓词，给需要评估的SQL[[三值逻辑|三值逻辑（3VL）]]（true/false/unknown）或[[逻辑代数|布尔]][[真值|真值]]指定条件，并限制语句和查询的效果，或改变程序流程。
* 查询，基于特定条件检索数据。这是''SQL''的一个重要组成部分。
* 语句，可以持久地影响纲要和数据，也可以控制[[数据库事务|数据库事务]]、程序流程、连接、会话或诊断。
** SQL语句也包括[[分號|分號]]（";"）语句终结符。尽管并不是每个平台都必需，但它是作为SQL语法的标准部分定义的。
* [[空白|无意义的空白]]在SQL语句和查询中一般会被忽略，更容易格式化SQL代码便于阅读。

==语言特点==
SQL是高级的[[非過程化編程|非過程化編程]]語言，它允许用户在高层数据结构上工作。它不要求用户指定对数据的存放方法，也不需要用户了解其具体的数据存放方式。而它的界面，能使具有底层结构完全不同的数据库系统和不同数据库之间，使用相同的SQL作为数据的输入与管理。它以记录项目〔records〕的合集（set）〔项集，record set〕作为操纵对象，所有SQL语句接受项集作为输入，回送出的项集作为输出，这种项集特性允许一条SQL语句的输出作为另一条SQL语句的输入，所以SQL语句可以嵌套，这使它拥有极大的灵活性和强大的功能。在多数情况下，在其他編程語言中需要用一大段程序才可实践的一个单独事件，而其在SQL上只需要一个语句就可以被表达出来。这也意味着用SQL可以写出非常复杂的语句，在不特別考慮效能下。

SQL同時也是数据库[[文件格式|文件格式]]的[[扩展名|扩展名]]。

SQL包含四个部分：
* [[資料定義語言|資料定義語言]]
* [[資料操縱語言|資料操縱語言]]
* [[資料控制語言|資料控制語言]]
* [[事务控制語言|事务控制語言]]

===SQL函数===
{| class="wikitable"
|-
! 函数 !! 描述 
|-
| AVG || 平均值 
|-
| COUNT || 计数（不含Null） 
|-
| FIRST || 第一个记录的值 
|-
| MAX || 最大值 
|-
| MIN ||最小值
|-
| STDEV ||样本标准差
|-
| STDEVP ||总体标准差
|-
| SUM ||求和
|-
| VAR ||样本方差
|-
| VARP ||总体方差
|-
| UCASE ||转化为全大写字母
|-
| LCASE ||转化为全小写字母
|-
| MID ||取中值
|-
| LEN ||计算字符串长度
|-
| INSTR ||获得子字符串在母字符串的起始位置
|-
| LEFT ||取字符串左邊子串
|-
| RIGHT ||取字符串右边子串
|-
| ROUND ||数值四舍五入取整
|-
| MOD ||-{zh-hans:取余; zh-hant:取餘; zh-cn:取余; zh-tw:取餘; zh-hk:取餘; zh-sg:取余}-
|-
| NOW ||获得当前时间的值
|-
| FORMAT ||字符串格式化
|-
| DATEDIFF ||获得两个时间的差值
|}

== 互操作性和標準化 == 
供應商之間的SQL實現不兼容，不一定完全遵循標準。各种数据库的SQL方言通常不可移植，特别是在日期时间语法、字符串连接、<code>NULL</code>、比较的大小写敏感方面。只有[[PostgreSQL|PostgreSQL]]与[[Mimer_SQL|Mimer SQL]]努力遵从标准。

=== 標準化歷史 ===
SQL在1986年被ANSI标准化，1987年被ISO标准化。由{{tsl|en|ISO/IEC JTC 1/SC 32|ISO/IEC JTC 1/SC 32|''ISO/IEC JTC 1, Information technology, Subcommittee SC 32, Data management and interchange''}}维护。标准名称通常为如下模式：''ISO/IEC 9075-n:yyyy Part n: title''。
{| class=wikitable
|-
! 年份
! 名字
! 别名
! 注释
|-
| 1986
| SQL-86
| SQL-87
| ANSI首次标准化
|-
| 1989
| SQL-89
| [[聯邦資料處理標準|FIPS]] 127-1
| 小修改，增加了integrity constraint 
|-
| 1992
| [[SQL-92|SQL-92]]
| SQL2, FIPS 127-2
| 大修改，成为现代SQL的基础
|-
| 1999
| {{tsl|en|SQL:1999}}
| SQL3
| 增加了正则表达式匹配、递归查询（传递闭包）、数据库触发器、过程式与控制流语句、非标量类型(arrays)、面向对象特性。在Java中嵌入SQL([[SQL/OLB|SQL/OLB]])及其逆([[SQL/JRT|SQL/JRT]])
|-
| 2003
| {{tsl|en|SQL:2003}}
| 
| 增加[[XML|XML]]相关特性([[SQL/XML|SQL/XML]])、''window functions''、标准化sequences、自动产生值的列。对SQL:1999的新特性重新描述其内涵。
|-
| 2006
| {{tsl|en|SQL:2006}}
| 
| 导入/导出XML数据与SQL数据库。[[XQuery|XQuery]]
|-
| 2008
| {{tsl|en|SQL:2008}}
| 
| 在cursor之外的ORDER BY语句。INSTEAD OF触发器。TRUNCATE语句。FETCH子句
|-
| 2011
| {{tsl|en|SQL:2011}}
|
| 增加时态数据(PERIOD FOR)。增强了''window functions''与FETCH子句
|-
| 2016
|{{tsl|en|SQL:2016}}
|
| 增加行模式匹配、多态表函数、[[JSON|JSON]]。
|-
| 2019
|SQL:2019
|
| 增加了第15部分，多维数组（MDarray类型和运算符）。
|}

=== 当前标准 ===
该标准通常用以下模式表示：'''ISO/IEC 9075-n：yyyy 第n部分：标题'''，或者简称为'''ISO/IEC 9075'''。

ISO / IEC 9075补充了ISO / IEC 13249：SQL多媒体和应用程序包（SQL/MM），该程序包定义了基于SQL的接口和包，给诸如视频，音频和空间数据之类的广泛的应用程序。感兴趣的各方可以从ISO、IEC或ANSI购买SQL标准文档。SQL：2008的草稿可作为[[ZIP格式|zip]]存档免费获得。

==== SQL标准剖析 ====
SQL标准包含10部分：

* ISO/IEC 9075-1:2016 Part 1: ''Framework'' (SQL/Framework). 提供逻辑概念
* ISO/IEC 9075-2:2016 Part 2: ''Foundation'' (SQL/Foundation). 包含语言的主要内容，强制与可选特性。 
* ISO/IEC 9075-3:2016 Part 3: ''Call-Level Interface'' ([[SQL/CLI|SQL/CLI]]). 定义了接口成分(structures, procedures, variable bindings) 用于编写能执行SQL的应用程序的语言：Ada，C/C++，COBOL，Fortran，MUMPS，Pascal，PL/I。对于Java语言见标准第10部分。[[ODBC|ODBC]]是一个著名的SQL/CLI的超集。这部分标准主要包含强制的特性。
* ISO/IEC 9075-4:2016 Part 4: ''Persistent stored modules'' ([[SQL/PSM|SQL/PSM]])。SQL的过程式扩展，包括控制流、条件处理、语句条件signals与resignals、cursors、本地变量、表达式赋值到变量与参数。此外，SQL/PSM形式化声明与维护了持续性（persistent）数据库语言例程（例如存储过程）。这部分标准主要包含可选的特性。
* [http://standards.iso.org/ittf/PubliclyAvailableStandards/c067367_ISO_IEC_TR_19075-6_2017.zip Part-6]{{Wayback|url=http://standards.iso.org/ittf/PubliclyAvailableStandards/c067367_ISO_IEC_TR_19075-6_2017.zip |date=20181020150759 }}: ''Support for JavaScript Object Notation (JSON)''. 2017年首次集成JSON数据类型到SQL标准。
* ISO/IEC 9075-9:2016 Part 9: ''Management of External Data'' ([[SQL/MED|SQL/MED]]). 这部分标准主要包含可选的特性。
* ISO/IEC 9075-10:2016 Part 10: ''Object language bindings'' ([[SQL/OLB|SQL/OLB]])。定义了[[SQLJ|SQLJ]]，SQL嵌入到Java，保证了SQLJ应用程序二进制可移植。这部分标准主要包含可选的特性。
* ISO/IEC 9075-11:2016 Part 11: ''Information and definition schemas'' ([[SQL/Schemata|SQL/Schemata]]). 定义了Information Schema与Definition Schema，提供了常用工具集使得SQL数据库与对象自描述。这些工具包括SQL object identifier、structure与integrity constraints、security与authorization specifications, features与packages。这部分标准主要包含强制与可选的特性。
* ISO/IEC 9075-13:2016 Part 13: ''SQL Routines and types using the Java TM programming language'' ([[SQL/JRT|SQL/JRT]]). SQL应用程序调用静态方法作为子程序的能力('Java-in-the-database')；Java类作为SQL结构化用户定义类型。这部分标准主要包含可选的特性。
* ISO/IEC 9075-14:2016 Part 14: ''XML-Related Specifications'' ([[SQL/XML|SQL/XML]]). 这部分标准主要包含可选的特性。
* ISO/IEC 9075-15:2019 Part 15: 多维数组(SQL/MDA)。 它为SQL指定了多维数组类型（MDarray），以及对MDarray，MDarray切片，MDarray单元和相关功能的操作。 标准的这一部分仅包含可选功能。

==== ISO / IEC标准的扩展 ====
''ISO/IEC 9075''被''ISO/IEC 13249: SQL Multimedia and Application Packages'' (SQL/MM)补充。后者定义了基于SQL的音视频、空间数据的界面与包。包括：
* ISO/IEC 13249-1:2016 Part 1: ''Framework''
* ISO/IEC 13249-2:2003 Part 2: ''Full-Text''
* ISO/IEC 13249-3:2016 Part 3: ''Spatial''
* ISO/IEC 13249-5:2003 Part 5: ''Still image''
* ISO/IEC 13249-6:2006 Part 6: ''Data mining''
* ISO/IEC 13249-7:2013 Part 7: ''History''
* ISO/IEC 13249-8:xxxx Part 8: ''Metadata Registry Access''  ''[https://web.archive.org/web/20180612143206/https://www.iso.org/standard/73181.html MRA]'' (work in progress)

== 以SQL為基礎的其他延伸語言 ==
* [[Transact-SQL|Transact-SQL]]
:微軟[[MS_SQL-Server|MS SQL-Server]]，以及{{tsl|en|Sybase Adaptive Server|}}系列資料庫所用的SQL
* [[PL-SQL|PL-SQL]]
: [[Oracle|Oracle]] [[Oracle資料庫|資料庫]]所使用的SQL

== 安全問題 ==
{{main|SQL注入攻击|參數化查詢}}

由於SQL指令在部份進階使用時，語法會依照特定條件來變換，而且若是表格中的欄位過多時，許多開發人員都會習慣以字串組立的方式建立SQL指令，而且又使用系統管理員級的帳戶連到資料庫，因此讓駭客有機會利用SQL的組立方式進行攻擊，像是在指令中添加部份刺探性或破壞性的指令（例如<code>DROP TABLE</code>、<code>DROP DATABASE</code>或是<code>DELETE * FROM myTable</code>等具破壞性的指令），讓資料庫的資料或實體伺服器被破壞，導致服務中斷或是系統癱瘓等後果，或是以邏輯的漏洞，在密碼欄寫入特殊字串(例如' or '1'='1)，讓該字串形成的邏輯判斷永遠為真，或直接取得非查詢條件的資料，而不需要知道密碼，以達成非法登入系統的目的，此種攻擊手法稱為'''SQL注入'''（SQL injection）。

目前實務上較有效的防禦方法，就是全面改用[[參數化查詢|參數化查詢]]。

== 参考文献 ==
{{Reflist|30em}}

== 外部連結 ==
{{Wikibooks|:en:SQL_Dialects_Reference}}
* [http://troels.arvin.dk/db/rdbms/ Comparison of different SQL implementations] {{Wayback|url=http://troels.arvin.dk/db/rdbms/ |date=20050309010315 }}

== 参见 ==
* [[关系数据库|关系数据库]]
* [[语言集成查询|语言集成查询]]

{{-}}
{{SQL}}
{{查询语言}}
{{程序设计语言}}
{{Database}}
{{Computer Science}}
{{ISO}}

[[Category:SQL|Category:SQL]]
[[Category:数据库|S]]
[[Category:數據查詢語言|Category:數據查詢語言]]
[[Category:宣告式編程語言|Category:宣告式編程語言]]
[[Category:ISO标准化编程语言|Category:ISO标准化编程语言]]