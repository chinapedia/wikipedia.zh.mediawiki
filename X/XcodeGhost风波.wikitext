{{NoteTA|G1=IT}}

'''XcodeGhost风波'''，为[[中国大陆|中国大陆]]地区[[App_Store_(iOS)|App Store]]中的部分[[iOS|iOS]]應用程式被称为「XCodeGhost」的第三方惡意代码注入，而产生了一系列的问题，包括可能的隐私泄漏、广告点击。

因为属于开发者端的程序污染，所以即便是未[[越獄_(iOS)|越狱]]的iOS用户从苹果官方App Store下载应用也可能存在风险。

根據[[史諾登|史諾登]]（Edward Snowden）揭露文件，該手法於2012年，[[美國|美國]][[中情局|中情局]]（CIA）已有相關能力，即透過偽冒Xcode，用來監控所有使用該偽冒開發工具所開發的App及後續的修改版本，而這套偽冒開發工具所開發的App，可以在[[蘋果公司|蘋果公司]]的官方App Store上架並販售，且不會被任何人員發覺有異常之處。<ref>{{cite web|url=https://www.ithome.com.tw/news/99234|title=XcodeGhost風暴事件大剖析|publisher=電週文化事業|date=2015-10-13|author=黃彥棻|access-date=2017-12-13|archive-date=2021-05-14|archive-url=https://web.archive.org/web/20210514122429/https://www.ithome.com.tw/news/99234}}</ref>

==事件发展==
===XcodeGhost植入===
[[Xcode|Xcode]]为苹果公司所發行、供程式設計師開發[[OS_X|OS X]]、[[iOS|iOS]]、[[watchOS|watchOS]]與[[tvOS|tvOS]]應用程式的[[整合開發環境|整合開發環境]]（IDE），在Mac App Store中免费提供。由于[[中华人民共和国网络审查|网络审查]]导致中国大陆用户访问[[Mac_App_Store|Mac App Store]]有连接困难，部分开发者出于方便选择了国内第三方渠道下载（如[[百度网盘|百度网盘]]、[[迅雷|迅雷]]离线等）或者从社交平台查找获得开发程序，由此带来了安全隐患。

而这部分Xcode的框架库中被加入了被称为“XcodeGhost”的框架库，导致其编译出来的App都带有后门代码，会在最终客户端运行时将隐私信息提交给第三方。<!-- ；同时安装这类受感染应用的设备具备可能的广告点击能力。 --><ref name="TencentWarning" />

===爆发===
根据已经披露的文档，腾讯安全应急响应中心在跟踪某app的bug时发现异常流量，解析后上报了中国[[国家互联网应急中心|国家互联网应急中心]]（CNCERT）<ref name="TencentWarning">{{cite web|url=https://security.tencent.com/index.php/blog/msg/96|title=你以为这就是全部了？我们来告诉你完整的XCodeGhost事件|website=腾讯安全应急响应中心|author=Gmxp|language=zh-hans|date=2015-09-19|access-date=2018-08-06|dead-url=no|archive-date=2018-08-06|archive-url=https://web.archive.org/web/20180806170550/https://security.tencent.com/index.php/blog/msg/96}}</ref>，后者随即在2015年9月14日发布了预警訊息<ref name="CNCERTWarning">{{cite web|url=http://www.cert.org.cn/publish/main/12/2015/20150914152821158428128/20150914152821158428128_.html|title=关于使用非苹果官方XCODE存在植入恶意代码情况的预警通报|website=国家互联网应急中心|date=2015-09-14|access-date=2018-07-06|language=zh-hans|dead-url=no|archive-date=2018-08-06|archive-url=https://web.archive.org/web/20180806170733/http://www.cert.org.cn/publish/main/12/2015/20150914152821158428128/20150914152821158428128_.html}}</ref>。之后也有其他国家的信息安全组织跟进调查。

在2015年9月17日左右，[[新浪微博|新浪微博]]用户“@唐巧_boy”发布微博声称Xcode有可能被第三方代码注入，而在社交平台上引起轩然大波。[[乌云_(网站)|乌云 (网站)]]后续发布相关的知识库文章<ref>{{cite web|url=http://drops.wooyun.org/news/8864|title=XCode编译器里有鬼 – XCodeGhost样本分析|website=乌云|language=zh-hans|date=2015-09-17|dead-url=yes|archive-date=2015-09-20|archive-url=https://web.archive.org/web/20150920191633/http://drops.wooyun.org/news/8864|accessdate=2015-09-20}}</ref>。

===当事人陈述===
2015年9月19日凌晨4时许，新浪微博上出现一名“XcodeGhost-Author”的新用户发布一条微博訊息，声称XcodeGhost只是一个实验性质项目；随后该项目的[[GitHub|GitHub]]页面也刊载了一致的声明<ref name="AuthorStatement">[https://github.com/XcodeGhostSource/XcodeGhost XcodeGhost] {{Wayback|url=https://github.com/XcodeGhostSource/XcodeGhost |date=20220516011420 }} GitHub上的XcodeGhost项目</ref>。

===应急处理===
苹果方面虽然事前缺乏对程序的安全审核，但是事件发生后火速对感染恶意代码的app进行了下架<ref name="offshelf">[http://www.cnbeta.com/articles/431557.htm 苹果App Store火线下架遭感染的软件] {{Wayback|url=http://www.cnbeta.com/articles/431557.htm |date=20160107131406 }} — cnbeta</ref>。

部分中國大陆地区开发商的App因此受到影响，因此对其受污染的App使用正规渠道下载的Xcode进行编译后重新上线。

==受感染应用==
受到影响的app程序众多，据称受感染的app多达76个<ref name="76app">[http://www.techweb.com.cn/internet/2015-09-20/2204531.shtml 苹果App被置病毒全部名单 不是只有20多个而是76个] {{Wayback|url=http://www.techweb.com.cn/internet/2015-09-20/2204531.shtml |date=20200808115541 }} — techweb</ref>，而记载着app名单的截图应该来自“360安全播报平台”，其将在2015年9月19日更新的消息中将受XcodeGhost感染的app数量上调为344款<ref name="backdoornum">[http://bobao.360.cn/news/detail/2088.html 已知有后门的iOS App] {{Wayback|url=http://bobao.360.cn/news/detail/2088.html |date=20150920222047 }} — 360安全播报平台</ref>；而截至2015年9月20日下午的通报，受感染app数量为1078款<ref name="backdoornum" />。

知名度较高的部分app如：[[微信|微信]]、[[网易云音乐|网易云音乐]]、[[滴滴打车|滴滴打车]]、[[高德地图|高德地图]]、[[12306|12306]]、[[同花顺|同花顺]]、中信银行动卡空间、[[简书|简书]]等。涉及包括即时通讯软件、地图应用甚至金融服务产品。

苹果公司對此事进行了公开声明<ref name="applenote">{{cite web|author1=Apple|title=有关 XcodeGhost 的问题和解答|url=//www.apple.com/cn/xcodeghost/|website=蘋果公司官方網站|accessdate=2015-09-27|language=zh-cn,en|dead-url=yes|archive-date=2015-09-27|archive-url=https://web.archive.org/web/20150927035443/https://www.apple.com/cn/xcodeghost/}}</ref>，並对于部分感染app进行了下架处理<ref name="offshelf" />；从2015年9月20日开始，部分下架程序重新编译后上架，但各厂商对此态度不同，微信的版本更新中并未说明原因，而网易云音乐则注明为“修复XcodeGhost问题”<ref>{{cite web|url=https://itunes.apple.com/cn/app/wang-yi-yun-yin-le-hao-kou/id590338362|title=网易云音乐|author=网易|date=2015-09-26|publisher=iTunes|language=zh-cn|accessdate=2015-09-26|dead-url=no|archive-date=2015-09-26|archive-url=https://web.archive.org/web/20150926113749/https://itunes.apple.com/cn/app/wang-yi-yun-yin-le-hao-kou/id590338362}}</ref>。

==影响==
;事件相关
*中国官方媒体的中央电视台报道了该事件<ref>[http://news.cntv.cn/2015/09/20/VIDE1442722138330797.shtml 苹果手机多款应用程序现“后门”] {{Wayback|url=http://news.cntv.cn/2015/09/20/VIDE1442722138330797.shtml |date=20220418020639 }} — cntv</ref>，且在节目中援引专家说法，对所谓作者的无害声明进行质疑。
*安全网站如乌云、腾讯安全中心，自媒体月光博客等也在该事件中作为信息发布平台提供支持。
*虽然苹果公司发布了声明并对感染应用做了下架处理<ref name="applenote" />，然而风险仍然存在，即如果用户下载了受感染应用而没有更新，恶意代码仍然有被运行风险。苹果对此也并没有对所有用户发布推送性质的通告。
*腾讯科技在2015年9月21日发表了署名“梁辰”的相关评论文章<ref name="liangchen">[http://tech.qq.com/a/20150921/010707.htm 《苹果遭遇信任危机：苹果APP也会被黑》] {{Wayback|url=http://tech.qq.com/a/20150921/010707.htm |date=20210711024457 }} - 腾讯科技</ref>，箭头直指苹果的安全防御机制，解释相关黑色产业链的存在；然而最后段落中，对于开发者不恰当使用第三方渠道下载XCode工具，该文批评指“每次下Xcode花个几十分钟非常正常，这才造成大家都用迅雷和百度网盘这种非官方渠道”。此外，文中错误指称[[肯·汤普逊|肯·汤普逊]]言及『编译Unix代码的C编辑器里留有“[[軟體後門|后门]]”』，事实为Ken在其论文《Reflections on Trusting Trust》中阐述的若不校验基于信任的信任，那么编译器出现问题时则会影响全局安全性<ref>{{Cite journal | last = Thompson | first = Ken | authorlink = Ken Thompson | date = August 1984 | title = Reflections on Trusting Trust | journal = Communications of the ACM | volume = 27 | issue = 8 | pages = 761–763 | doi = 10.1145/358198.358210 | url = http://cm.bell-labs.com/who/ken/trust.html | 12 =  | deadurl = yes | archiveurl = https://archive.is/20120525231611/http://cm.bell-labs.com/who/ken/trust.html | archivedate = 2012-05-25 | access-date = 2015-10-05 }}</ref>，与本次事件有相似度。

;安全问题外延
*有人在查找相应的发布源时发现其也有发布带有后门框架的知名游戏开发框架[[Unity_(游戏引擎)|Unity]]第三方发布源，怀疑Unity也有类似的影响。<ref>{{cite web|title=不止Xcode，网曝游戏开发工具Unity4.X被植入恶意代码 - XcodeGhost,Xcode,病毒 - IT之家|url=http://www.ithome.com/html/ios/177698.htm|access-date=2015-09-24|archive-date=2022-04-26|archive-url=https://web.archive.org/web/20220426063148/https://www.ithome.com/html/ios/177698.htm}}</ref>而Unity的开发商则发布声明自查官方版本没问题并要求开发者从官方途径下载开发程序。<ref>{{cite web|title=Unity和cocos 2d-x回应XcodeGhost污染_国内动态 - 07073产业频道|url=http://chanye.07073.com/guonei/1209514.html|access-date=2015-09-24|archive-date=2020-05-15|archive-url=https://web.archive.org/web/20200515134129/http://chanye.07073.com/guonei/1209514.html}}</ref>
*在2015年9月22日，虽然XcodeGhost作者声明已关闭服务器，然而有安全从业人员表示仍然有安全隐患，潜在攻击者可以通过域名解析污染等手段伪装获得敏感数据，这类手法被命名为[[MITM|截胡攻击]]（“截胡”为[[麻将|麻将]]术语）<ref>[http://drops.wooyun.org/papers/9024 你以为服务器关了这事就结束了？ - XcodeGhost截胡攻击和服务端的复现，以及UnityGhost预警] {{Wayback|url=http://drops.wooyun.org/papers/9024 |date=20201108090619 }} - 乌云</ref>。

==原因==
*因为苹果公司的App Store等服务在中国大陆有访问缓慢的问题。部分开发者选择了从非正规的第三方渠道下载套件，这为恶意软件开发者散布恶意代码提供可乘之机，通过在大陆地区各大苹果开发社交网站散布自己带有后门框架的Xcode来诱使开发人员使用，从而埋下隐患。<ref name="liangchen" />

*XcodeGhost作者声称这是一个实验性项目<ref>{{Cite web |url=https://github.com/XcodeGhostSource/XcodeGhost |title=XcodeGhost |access-date=2015-09-20 |archive-date=2022-05-16 |archive-url=https://web.archive.org/web/20220516011420/https://github.com/XcodeGhostSource/XcodeGhost }}</ref>，然而[[腾讯|腾讯]]安全团队、RAyH4c等均对此说法表示质疑，指其在事前的针对性[[SEO|SEO]]及该恶意软件感染的规模等方面，均远超出其所声称的个人能力<ref>{{cite web |author1=雪碧 |author2=明明知道 |title=迷雾重重：XcodeGhost究竟是恶意病毒还是“无害的实验”？ |url=https://www.freebuf.com/news/78862.html |website=Freebuf |accessdate=2020-07-05 |date=2015-09-19 |archive-date=2018-01-21 |archive-url=https://web.archive.org/web/20180121195336/http://www.freebuf.com/news/78862.html }}</ref>。

==参见==
*[[iOS应用程序审核|iOS应用程序审核]]
*[[Xcode|Xcode]]（苹果开发套件）
*[[防火长城|防火长城]]（中国大陆访问境外网站受限的阻挡）
*[[僵尸网络|僵尸网络]]
*[[2014年8月名人照片泄露事件|2014年8月名人照片泄露事件]]（曾经发生的iCloud泄露事件）

==参考资料==
{{reflist|2}}

==外部链接==
*{{GitHub|https://github.com/XcodeGhostSource/XcodeGhost|XcodeGhost頁面}}
*[[Greatfire|Greatfire]]組織：[//zh.greatfire.org/blog/2015/sep/popular-chinese-ios-apps-compromised-unprecedented-malware-attack 中国流行的iOS应用遭到前所未有的恶意软件感染]{{zh-hans}}
*[http://www.cert.org.cn/publish/main/12/2015/20150914152821158428128/20150914152821158428128_.html 关于使用非苹果官方XCODE存在植入恶意代码情况的预警通报] {{Wayback|url=http://www.cert.org.cn/publish/main/12/2015/20150914152821158428128/20150914152821158428128_.html |date=20180806170733 }} 国家互联网应急中心 2015-09-14
*[http://security.tencent.com/index.php/blog/msg/96 你以为这就是全部了？我们来告诉你完整的XCodeGhost事件] {{Wayback|url=http://security.tencent.com/index.php/blog/msg/96 |date=20210422133633 }} — 腾讯安全应急响应中心
*[http://www.jianshu.com/p/80c8f043e91f 《针对此次XcodeGhost攻击行为的分析》] {{Wayback|url=http://www.jianshu.com/p/80c8f043e91f |date=20210820021833 }}
*[http://researchcenter.paloaltonetworks.com/2015/09/novel-malware-xcodeghost-modifies-xcode-infects-apple-ios-apps-and-hits-app-store/ Novel Malware XcodeGhost Modifies Xcode, Infects Apple iOS Apps and Hits App Store] {{Wayback|url=http://researchcenter.paloaltonetworks.com/2015/09/novel-malware-xcodeghost-modifies-xcode-infects-apple-ios-apps-and-hits-app-store/ |date=20150925133836 }} 安全公司 Paloalto networks 的分析报告{{en}}
*[[Solidot|Solidot]]：[http://www.solidot.org/story?sid=45643 报道称XcodeGhost开发者已被控制] {{Wayback|url=http://www.solidot.org/story?sid=45643 |date=20220430011223 }}{{zh-cn}}

[[Category:网络安全|Category:网络安全]]
[[Category:2015年9月|Category:2015年9月]]
[[Category:2015年中国大陆网络事件|Category:2015年中国大陆网络事件]]