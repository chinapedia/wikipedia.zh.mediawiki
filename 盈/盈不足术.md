'''盈不足术'''是[[中国数学史|中国古代数学]]的一种算术方法。[[西汉|西汉]]成书的[[中国算学|算学]]经典《[[九章算術|九章算術]]》的第七章即名为“'''盈不足'''”。狭义的盈不足术指典型的盈亏问题的[[算法|算法]]。广义的盈不足术则指通过'''双假设法'''将其他[[数学|数学]]问题转化为盈亏问题、再用机械化算法求解的方法。<ref>{{cite encyclopedia |year=2009|title =盈不足术|encyclopedia=[[中国大百科全书|中国大百科全书]]|publisher=中国大百科全书出版社|location=北京|edition=第二版|ISBN=978-7-5000-7958-3}}</ref><ref>{{cite wikisource|九章算術#卷第七 盈不足}}</ref>

==典型盈亏问题==
{| class="wikitable" style="text-align:center;"
! width="25%" | 《九章算数》原文
! width="25%" | 解释
! width="25%" | 抽象算法
! width="25%" | 具体代入
|-
| 今有共买鸡 || 一群人一起买鸡 ||  || 
|-
| 人出九，盈十一 || 每人出 9 块，合起来多出 11 块 || 记每人出的钱为 <math>a_1</math>，多出的钱为 <math>b_1</math>||<math>a_1=9\quad b_1=11</math>
|-
| 人出六，不足十六 || 每人出 6 块，合起来差 16 块 || 记每人出的钱为 <math>a_2</math>，差的钱为 <math>b_2</math>||<math>a_2=6\quad b_2=16</math>
|-
| 问︰人数、鸡价各几何？ || 人数和鸡的总价分别是多少？ || rowspan="2" |  || rowspan="2" | 
|-
| 盈不足術曰 || “盈不足術”的算法如下 
|-
| 置所出率，盈、不足各居其下 || 写出每人出了多少钱，把多出和差的钱分别对应地写在其下 || <math>a_1\qquad a_2</math><br><math>b_1\qquad b_2</math> || <math>9\qquad 6</math><br><math>11\qquad 16</math>
|-
| 令維乘所出率，并以為實 || 交叉相乘，再相加，作为被除数（“实”） || <math>a_1b_2+a_2b_1</math> ||<math>9 \times 16 + 6 \times 11 = 210</math>
|-
| 并盈、不足為法 || 把多出和差的钱加起来，作为除数（“法”） || <math>b_1+b_2</math> || <math>16+11=27</math>
|-
| 實如法而一 || 被除数除以除数<br>（所得即为不盈不亏时的条件） || <math>x=\frac{a_1b_2+a_2b_1}{b_1+b_2}</math> ||<math>x=\frac{210}{27}=7+\frac 79</math>
|-
| 盈不足相與同其買物者，置所出率，以少減多，餘 || 写出多出时和不足时每人两次分别出了多少钱，用大数减去小数，得到“余” || <math>|a_1-a_2|</math> || <math>|9-6|=3</math>
|-
| 以约法、实
实为物价，法为人数
| “余”除“实”，得到物价<br>“余”除“法”得到人数 || <math>p=\frac{a_1b_2+a_2b_1}{|a_1-a_2|}</math><br><math>q=\frac{b_1+b_2}{|a_1-a_2|}</math> || <math>p=\frac{210}{3}=70</math><br><math>q=\frac{27}{3}=9</math>
|-
| 答曰：九人，鸡价七十 || 共有 9 个人，总价为 70 块 ||  || 
|}

===证明===
[[刘徽|刘徽]]在为《九章算术》作注时，利用[[齐同原理|齐同原理]]对盈不足术进行了证明：“盈朒維乘兩設者，欲為同齊之意。……齊其假令，同其盈朒……通計齊則不盈不朒之正數，故可並之為實，並盈、不足為法。”<ref name=GSC>{{cite book |author=郭书春 译注|year=2009 |title =九章筭术译注 |publisher=上海古籍出版社 |location=上海 |ISBN=9787532554331}}</ref>{{rp|291}}

刘徽指出，交叉相乘的意义是使其“同齐”。每人所出为 <math>a_1</math>时，盈 <math>b_1</math>，那么总价变为 <math>b_2</math>倍、每人所出变为 <math>a_1b_2</math>时，盈 <math>b_1b_2</math>。每人所出为 <math>a_2</math>时，不足 <math>b_2</math>，那么总价变为 <math>b_1</math>倍、每人所出变为 <math>a_2b_1</math>时，不足 <math>b_1b_2</math>。这样就“同其盈朒”，两者相加则盈亏相抵，就“不盈不朒”，此时总价为 <math>b_1+b_2</math>倍，每人所出为 <math>a_1b_2+a_2b_1</math>，相除即得到总价不变时每人所出的钱。

==双假设法==
除盈亏类问题，《九章算术》还通过双假设法，将其他[[算术|算术]]问题转化、套入盈亏类问题的算法模型，进行求解。如：
{| class="wikitable" style="text-align:center;"
! width="25%" | 《九章算数》原文
! width="25%" | 解释
! width="25%" | 抽象算法
! width="25%" | 具体代入
|-
| 今有醇酒一[[斗|斗]]，直錢五十；行酒一斗，直錢一十 || 好酒每斗 50 块，劣酒每斗 10 块 ||  || 
|-
| 今將錢三十，得酒二斗 || 现在花了 30 块，买了 2 斗酒 ||  || 
|-
| 問︰醇、行酒各得幾何？ || 买了多少斗好酒、多少斗劣酒？ ||  || 
|-
| 術曰：假令醇酒五[[升|升]]，行酒一斗五升，有餘一十 || 假设买了 0.5 [[东亚传统计量体系#体积单位|斗]]好酒、1.5 斗劣酒，则多花了 10 块 || 设 <math>a_1</math>，计算得 <math>b_1</math>||<math>a_1=0.5</math><br><math>b_1=50\times 0.5+10\times (2-0.5)-30=10</math>
|-
| 令之醇酒二升，行酒一斗八升，不足二 || 假设买了 0.2 斗好酒、1.8 斗劣酒，则少花了 2 块 || 设 <math>a_2</math>，计算得 <math>b_2</math>||<math>a_2=0.2</math><br><math>b_2=30-[50\times 0.2+10\times (2-0.2)]=2</math>
|-
| || （使用盈不足术，求出不盈不亏时的条件） || <math>x=\frac{a_1b_2+a_2b_1}{b_1+b_2}</math> || <math>x=\frac{0.5\times 2+0.2\times 10}{10+2}=0.25</math><br><math>2-0.25=1.75</math>
|-
| 答曰：醇酒二升半，行酒一斗七升半 || 好酒 0.25 斗，劣酒 1.75 斗 ||  || 
|}
该问题本属于[[鸡兔同笼|鸡兔同笼]]，而通过两次假设可以将其转化为盈亏类问题，再用盈不足术求解。

===非线性问题===
盈不足术实际上是一种[[线性插值法|线性插值法]]；对于[[非线性|非线性]]的问题，所求出的只是其近似值。《九章算术》和刘徽都没有意识到这一点。<ref name=GSC/>{{rp|302}}如：
{| class="wikitable" style="text-align:center;"
! width="25%" | 《九章算数》原文
! width="25%" | 解释
! width="25%" | 抽象算法
! width="25%" | 具体代入
|-
| 今有蒲生一日，長三尺；莞生一日，長一尺<br>蒲生日自半；莞生日自倍 || [[蒲草|蒲草]]第一天长 3 [[尺|尺]]，之后每天的生长速度为前一天的一半；<br>[[莞|莞草]]第一天长 1 尺，之后每天的生长速度为前一天的兩倍 ||  || 
|-
| 問︰幾何日而長等？ || 何时蒲草和莞草一样长？ ||  || 
|-
| 術曰：假令二日，不足一尺五[[寸|寸]] || 假设长了 2 天，则莞草还差 1.5 尺 || 设 <math>a_1</math>，计算得 <math>b_1</math>||<math>a_1=2</math><br><math>b_1=(3+1.5)-(1+2)=1.5</math>
|-
| 令之三日，有餘一尺七寸半 || 假设长了 3 天，则莞草长了 1.75 尺 || 设 <math>a_2</math>，计算得 <math>b_2</math>||<math>a_2=3</math><math>b_2=(1+2+4)-(3+1.5+0.75)=1.75</math>
|-
| || （使用盈不足术，求出不盈不亏时的条件） || <math>x=\frac{a_1b_2+a_2b_1}{b_1+b_2}</math> ||<math>x=\frac{2\times 1.75+3\times 1.5}{1.5+1.75}=2+\frac 6{13}</math>
|-
| 答曰：二日、十三分日之六 || 当长了 <math>2+\frac 6{13}</math> 天时 ||  || 
|}
[[File:盈不足术_蒲莞.jpg|350px]]
实际上该问题是非线性的。根据[[等比数列|等比数列]]求和公式，可以将莞草与蒲草的长度差表示为：

<math>f(x)=\frac{1\times (1-2^x)}{1-2}- \frac{3\times (1-0.5^x)}{1-0.5}=2^x+\frac{6}{2^x}-7</math>

所求即为 <math>f(x)</math>的[[正数|正数]][[根_(数学)|根]]。解得 <math>x=\log_{2} 6=1+\frac{\lg 3}{\lg 2}</math>。

而使用盈不足术所求出的答案实为近似值。两者关系见右图。

这种利用双假设法加盈不足术来求解一些复杂方程的根的近似值的方法，在现在的[[高等数学|高等数学]]中被应用于[[线性插值#线性插值近似法|线性插值近似法]]和[[弦截法|弦截法]]。

==历史==
在[[中国|中国]]最早的数学书《[[算数书|算数书]]》中，就有通过盈不足术计算[[面积|面积]]为一亩的[[正方形|正方形]]田地的[[边长|边长]]的记载。<ref>{{cite journal zh|author=江陵张家山汉简整理小组|year=2000|title=江陵张家山汉简《算数书》释文|journal=文物|issue=9|pages=78-84}}</ref>《九章算术》第七章“盈不足”，则是对双假设法最早的详细说明。<ref name=FBNQ>马丁玲. 斐波那契《计算之书》研究. [[上海交通大学|上海交通大学]]博士论文, 2009.</ref>{{rp|116}}

[[伊斯兰黄金时代|伊斯兰黄金时代]]的[[阿拉伯|阿拉伯]][[数学家|数学家]]也大量研究了双假设法。{{Link-en|阿布·卡米勒|Abū_Kāmil_Shujāʿ_ibn_Aslam}}著有《双假设法之书》（{{lang|ar-Latn|''Kitāb al-khaṭaʾayn''}}）。{{Link-en|古斯塔·伊本·卢卡|Qusta ibn Luqa}}采用[[欧式几何|欧式几何]]的方法，第一次对双假设法给出了几何证明。<ref name=FBNQ/>{{rp|117}}

[[中世纪|中世纪]][[欧洲|欧洲]]数学家[[斐波那契|斐波那契]]在《{{Link-en|计算之书|Liber Abaci}}》的第十三章中讨论了双假设法。他明确承认该方法来自阿拉伯数学，并称之为 {{lang|la|elchataym}}，即来自[[阿拉伯语|阿拉伯语]]的 {{lang|ar-Latn|al-khaṭāʾayn}}。<ref>{{cite book |author=斐波那契 著，劳伦斯·西格尔 英译，纪志刚 等译|year=2008 |title =计算之书 |publisher=科学出版社 |location=北京 |ISBN=9787030200174}}</ref>在[[代数|代数]]符号尚未普及的时代，这种万能算法在欧洲流传甚广，兴盛一时。<ref name=FBNQ/>{{rp|116、118、127}}

[[明朝|明朝]]时，中国传统数学已经衰落，《九章算术》近乎失传，盈不足术不为人所知。[[利玛窦|利玛窦]]和[[李之藻|李之藻]]将[[克里斯托弗·克拉维乌斯|克里斯托弗·克拉维乌斯]]的《实用算术概论》（{{lang|la|''Epitome arithmeticae practicae''}}）编译为《[[同文算指|同文算指]]》，将其中的双假设法称为“叠借互征法”。<ref name=FBNQ/>{{rp|130}}

[[钱宝琮|钱宝琮]]最早提出，阿拉伯数学中的双假设法来自中国的盈不足术，{{lang|ar-Latn|al-khaṭāʾayn}} 即与“[[契丹|契丹]]”有关。<ref>{{Citation |author=钱宝琮|chapter=《九章算术》盈不足术流传欧洲考|year=1927|title=钱宝琮科学史论文选集|pages=83-96|publisher=科学出版社|place=北京|publication-date=1983}}（[[统一书号|统一书号]]：13031·2369）</ref>[[李约瑟|李约瑟]]也认为有此种可能性。<ref>{{cite book|author=李约瑟 著，《中国科学技术史》翻译小组 译|year=1978 |title =[[中国科学技术史_(李约瑟)|中国科学技术史]]（第三卷） |publisher=科学出版社 |location=北京 |pages=266、326}}(统一书号：13031·717）</ref>这种说法已被中国数学史界广泛接受；但也有学者认为，中国盈不足术是欧洲双假设法的源头的说法仍然缺乏令人信服的证据支持。<ref name=FBNQ/>{{rp|137}}

==参考文献==
{{reflist}}

{{Portal box|中国数学史}}

{{中国数学史|state = collapsed}}

[[Category:数学近似|Category:数学近似]]
[[Category:中国古代数学|Category:中国古代数学]]
[[Category:汉朝科技|Category:汉朝科技]]