{{noteTA
|G1=IT
}}
'''檔案結尾'''（{{lang-en|End of File}}，縮寫為{{lang|en|EOF}}），是[[作業系統|作業系統]]无法从数据源读取更多数据的情形。資料源通常为檔案或串流。

在[[C標準函式庫|C標準函式庫]]中，像[[getchar|getchar]]这样的数据读取函数返回一个与符号（巨集）<code>EOF</code>相等的值来指明文件结束的情况发生，<code>EOF</code>的真实值与不同的平台有关（但通常是-1，比如在[[glibc|glibc]]中<ref>{{cite news |title=EOF and Errors (The GNU C Library) |url=http://www.gnu.org/s/libc/manual/html_node/EOF-and-Errors.html |language=en |author= |publisher= |date= |accessdate= |archive-date=2011-12-05 |archive-url=https://web.archive.org/web/20111205021634/http://www.gnu.org/s/libc/manual/html_node/EOF-and-Errors.html |dead-url=no }}</ref>），并且不等于任何有效的字符代码。块读取函数返回读取的字节数，如果它小于要求读取的字节数，就会出现一个文件结束符。

==EOF字符==

终端的输入通常是不会结束的，除非设备被断开。如果想让终端结束，那么可以输入EOF字符使之结束。文件通常以EOF字符结尾，因此可以通过输入文件使终端的输入结束。由于EOF字符是不可输入的，通常通过输入[[檔案結尾/dev/null|檔案結尾//dev/null]]以达到输入EOF的效果。

在[[UNIX|UNIX]]和[[AmigaDOS|AmigaDOS]]中，将击键翻译为EOF的过程是由终端的驱动程序完成的，因此应用程序无需将终端和其它输入文件区分开来。Unix平台的驱动程序在行首传送一个[[传输结束字符|传输结束字符]]（{{keypress|Control|D}}，ASCII编码为为04）来指明文件结束。在AmigaDOS中，驱动程序传送一个{{keypress|Control|\}}来指明文件结束（而{{keypress|Control|D}}被用作中断字符）。要向输入流中插入一个真正的{{keypress|Control|D}}字符，用户需要把一个“引用”命令字符放在它的前面（通常是{{tsl|en|Synchronous idle|Control-V}}，表示下一个字符不作为控制字符，而是按照字面量使用）。

在微软的[[MS-DOS|DOS]]和[[Microsoft_Windows|Windows]]（以及CP/M和许多DEC操作系统）中，读取数据时终端不会产生EOF。此时，应用程序知道数据源是一个终端（或者其它“字符设备”），并将一个已知的保留的字符或序列解释为文件结束的指明；最普遍地说，它是[[ASCII|ASCII]]码中的{{tsl|en|Substitute character|替换字符}}（{{keypress|Control|Z}}，代码26）。一些MS-DOS程序，包括部分微软MS-DOS的shell（[[COMMAND.COM|COMMAND.COM]]）和操作系统功能程序（如[[EDLIN|EDLIN]]），将文本文档中的{{keypress|Control|Z}}视为有意义数据的结尾，并且/或者在写入文本文档时将Control-Z添加到文档末尾。这是由于两个原因：

* 向后兼容[[CP/M|CP/M]]。CP/M的第1版与第2版的[[文件系统|文件系统]]以128字节“块”的倍数记录文件长度，所以当有意义数据在一个“块”的中间结束时，习惯上用{{keypress|Control|Z}}字符来标记它，此后至块结尾的字节为未利用。而[[文件配置表|MS-DOS文件系统]]总会记录文件确切的字节长度，所以在MS-DOS中文件不再必需以{{keypress|Control|Z}}字符来标记结尾。
* 它使得应用程序在从终端和文本文档读取数据时得以使用相同的代码。

==使用Control-D的来历==
在ANSI X3.27-1969[[磁带数据存储|磁带]]标准中，文件结束是由'''带标记'''（{{lang-en|tape mark}}）指明的，它由一个约3.5英寸的间隙和随后的一个字节组成，在[[九轨磁带|九轨磁带]]中这个字节包含字符13（十六进制），而在[[IBM七轨|七轨磁带]]中包含字符17（八进制）。<ref>{{cite news |title=Tape Transfer (Pre-1977): Exchange Media: MARC 21 Specifications for Record Structure, Character Sets, and Exchange Media (Library of Congress) |url=http://www.loc.gov/marc/specifications/specexchtape2.html#mark |language=en |author= |publisher= |date= |accessdate= |archive-date=2020-02-23 |archive-url=https://web.archive.org/web/20200223140046/http://www.loc.gov/marc/specifications/specexchtape2.html#mark |dead-url=no }}</ref>'''带结尾'''（{{lang-en|end-of-tape}}），通常縮寫為'''EOT'''，是由两个带标记指明的。这是在像[[System/360|IBM 360]]这样的机器上使用的标准。指明快到磁带物理结尾的[[九轨磁带|反射棒]]也被称为一个'''EOT'''标记。

== 参考 ==
{{reflist}}

[[Category:C標準函式庫|Category:C標準函式庫]]
[[Category:计算机文件|Category:计算机文件]]